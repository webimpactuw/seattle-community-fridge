{"ast":null,"code":"/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\n\n/*jslint indent: 2, vars: true, plusplus: true */\n/*global setTimeout, clearTimeout */\n\n(function (global) {\n  \"use strict\";\n\n  var setTimeout = global.setTimeout;\n  var clearTimeout = global.clearTimeout;\n  var XMLHttpRequest = global.XMLHttpRequest;\n  var XDomainRequest = global.XDomainRequest;\n  var ActiveXObject = global.ActiveXObject;\n  var NativeEventSource = global.EventSource;\n  var document = global.document;\n  var Promise = global.Promise;\n  var fetch = global.fetch;\n  var Response = global.Response;\n  var TextDecoder = global.TextDecoder;\n  var TextEncoder = global.TextEncoder;\n  var AbortController = global.AbortController;\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) {\n    // Firefox 2\n    document.readyState = \"loading\";\n    window.addEventListener(\"load\", function (event) {\n      document.readyState = \"complete\";\n    }, false);\n  }\n  if (XMLHttpRequest == null && ActiveXObject != null) {\n    // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\n    XMLHttpRequest = function () {\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\n    };\n  }\n  if (Object.create == undefined) {\n    Object.create = function (C) {\n      function F() {}\n      F.prototype = C;\n      return new F();\n    };\n  }\n  if (!Date.now) {\n    Date.now = function now() {\n      return new Date().getTime();\n    };\n  }\n\n  // see #118 (Promise#finally with polyfilled Promise)\n  // see #123 (data URLs crash Edge)\n  // see #125 (CSP violations)\n  // see pull/#138\n  // => No way to polyfill Promise#finally\n\n  if (AbortController == undefined) {\n    var originalFetch2 = fetch;\n    fetch = function (url, options) {\n      var signal = options.signal;\n      return originalFetch2(url, {\n        headers: options.headers,\n        credentials: options.credentials,\n        cache: options.cache\n      }).then(function (response) {\n        var reader = response.body.getReader();\n        signal._reader = reader;\n        if (signal._aborted) {\n          signal._reader.cancel();\n        }\n        return {\n          status: response.status,\n          statusText: response.statusText,\n          headers: response.headers,\n          body: {\n            getReader: function () {\n              return reader;\n            }\n          }\n        };\n      });\n    };\n    AbortController = function () {\n      this.signal = {\n        _reader: null,\n        _aborted: false\n      };\n      this.abort = function () {\n        if (this.signal._reader != null) {\n          this.signal._reader.cancel();\n        }\n        this.signal._aborted = true;\n      };\n    };\n  }\n  function TextDecoderPolyfill() {\n    this.bitsNeeded = 0;\n    this.codePoint = 0;\n  }\n  TextDecoderPolyfill.prototype.decode = function (octets) {\n    function valid(codePoint, shift, octetsCount) {\n      if (octetsCount === 1) {\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\n      }\n      if (octetsCount === 2) {\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\n      }\n      if (octetsCount === 3) {\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\n      }\n      throw new Error();\n    }\n    function octetsCount(bitsNeeded, codePoint) {\n      if (bitsNeeded === 6 * 1) {\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\n      }\n      if (bitsNeeded === 6 * 2) {\n        return codePoint > 15 ? 3 : 2;\n      }\n      if (bitsNeeded === 6 * 3) {\n        return 3;\n      }\n      throw new Error();\n    }\n    var REPLACER = 0xFFFD;\n    var string = \"\";\n    var bitsNeeded = this.bitsNeeded;\n    var codePoint = this.codePoint;\n    for (var i = 0; i < octets.length; i += 1) {\n      var octet = octets[i];\n      if (bitsNeeded !== 0) {\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n          string += String.fromCharCode(codePoint);\n        }\n      }\n      if (bitsNeeded === 0) {\n        if (octet >= 0 && octet <= 127) {\n          bitsNeeded = 0;\n          codePoint = octet;\n        } else if (octet >= 192 && octet <= 223) {\n          bitsNeeded = 6 * 1;\n          codePoint = octet & 31;\n        } else if (octet >= 224 && octet <= 239) {\n          bitsNeeded = 6 * 2;\n          codePoint = octet & 15;\n        } else if (octet >= 240 && octet <= 247) {\n          bitsNeeded = 6 * 3;\n          codePoint = octet & 7;\n        } else {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n        }\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\n          bitsNeeded = 0;\n          codePoint = REPLACER;\n        }\n      } else {\n        bitsNeeded -= 6;\n        codePoint = codePoint << 6 | octet & 63;\n      }\n      if (bitsNeeded === 0) {\n        if (codePoint <= 0xFFFF) {\n          string += String.fromCharCode(codePoint);\n        } else {\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\n        }\n      }\n    }\n    this.bitsNeeded = bitsNeeded;\n    this.codePoint = codePoint;\n    return string;\n  };\n\n  // Firefox < 38 throws an error with stream option\n  var supportsStreamOption = function () {\n    try {\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {\n        stream: true\n      }) === \"test\";\n    } catch (error) {\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\n    }\n    return false;\n  };\n\n  // IE, Edge\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\n    TextDecoder = TextDecoderPolyfill;\n  }\n  var k = function () {};\n  function XHRWrapper(xhr) {\n    this.withCredentials = false;\n    this.readyState = 0;\n    this.status = 0;\n    this.statusText = \"\";\n    this.responseText = \"\";\n    this.onprogress = k;\n    this.onload = k;\n    this.onerror = k;\n    this.onreadystatechange = k;\n    this._contentType = \"\";\n    this._xhr = xhr;\n    this._sendTimeout = 0;\n    this._abort = k;\n  }\n  XHRWrapper.prototype.open = function (method, url) {\n    this._abort(true);\n    var that = this;\n    var xhr = this._xhr;\n    var state = 1;\n    var timeout = 0;\n    this._abort = function (silent) {\n      if (that._sendTimeout !== 0) {\n        clearTimeout(that._sendTimeout);\n        that._sendTimeout = 0;\n      }\n      if (state === 1 || state === 2 || state === 3) {\n        state = 4;\n        xhr.onload = k;\n        xhr.onerror = k;\n        xhr.onabort = k;\n        xhr.onprogress = k;\n        xhr.onreadystatechange = k;\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\n        xhr.abort();\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        if (!silent) {\n          that.readyState = 4;\n          that.onabort(null);\n          that.onreadystatechange();\n        }\n      }\n      state = 0;\n    };\n    var onStart = function () {\n      if (state === 1) {\n        //state = 2;\n        var status = 0;\n        var statusText = \"\";\n        var contentType = undefined;\n        if (!(\"contentType\" in xhr)) {\n          try {\n            status = xhr.status;\n            statusText = xhr.statusText;\n            contentType = xhr.getResponseHeader(\"Content-Type\");\n          } catch (error) {\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\n            status = 0;\n            statusText = \"\";\n            contentType = undefined;\n            // Firefox < 14, Chrome ?, Safari ?\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\n          }\n        } else {\n          status = 200;\n          statusText = \"OK\";\n          contentType = xhr.contentType;\n        }\n        if (status !== 0) {\n          state = 2;\n          that.readyState = 2;\n          that.status = status;\n          that.statusText = statusText;\n          that._contentType = contentType;\n          that.onreadystatechange();\n        }\n      }\n    };\n    var onProgress = function () {\n      onStart();\n      if (state === 2 || state === 3) {\n        state = 3;\n        var responseText = \"\";\n        try {\n          responseText = xhr.responseText;\n        } catch (error) {\n          // IE 8 - 9 with XMLHttpRequest\n        }\n        that.readyState = 3;\n        that.responseText = responseText;\n        that.onprogress();\n      }\n    };\n    var onFinish = function (type, event) {\n      if (event == null || event.preventDefault == null) {\n        event = {\n          preventDefault: k\n        };\n      }\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\n      // IE 8 fires \"onload\" without \"onprogress\"\n      onProgress();\n      if (state === 1 || state === 2 || state === 3) {\n        state = 4;\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        that.readyState = 4;\n        if (type === \"load\") {\n          that.onload(event);\n        } else if (type === \"error\") {\n          that.onerror(event);\n        } else if (type === \"abort\") {\n          that.onabort(event);\n        } else {\n          throw new TypeError();\n        }\n        that.onreadystatechange();\n      }\n    };\n    var onReadyStateChange = function (event) {\n      if (xhr != undefined) {\n        // Opera 12\n        if (xhr.readyState === 4) {\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\n          }\n        } else if (xhr.readyState === 3) {\n          if (!(\"onprogress\" in xhr)) {\n            // testing XMLHttpRequest#responseText too many times is too slow in IE 11\n            // and in Firefox 3.6\n            onProgress();\n          }\n        } else if (xhr.readyState === 2) {\n          onStart();\n        }\n      }\n    };\n    var onTimeout = function () {\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, 500);\n      if (xhr.readyState === 3) {\n        onProgress();\n      }\n    };\n\n    // XDomainRequest#abort removes onprogress, onerror, onload\n    if (\"onload\" in xhr) {\n      xhr.onload = function (event) {\n        onFinish(\"load\", event);\n      };\n    }\n    if (\"onerror\" in xhr) {\n      xhr.onerror = function (event) {\n        onFinish(\"error\", event);\n      };\n    }\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\n    // https://code.google.com/p/chromium/issues/detail?id=153570\n    // IE 8 fires \"onload\" without \"onprogress\n    if (\"onabort\" in xhr) {\n      xhr.onabort = function (event) {\n        onFinish(\"abort\", event);\n      };\n    }\n    if (\"onprogress\" in xhr) {\n      xhr.onprogress = onProgress;\n    }\n\n    // IE 8 - 9 (XMLHTTPRequest)\n    // Opera < 12\n    // Firefox < 3.5\n    // Firefox 3.5 - 3.6 - ? < 9.0\n    // onprogress is not fired sometimes or delayed\n    // see also #64 (significant lag in IE 11)\n    if (\"onreadystatechange\" in xhr) {\n      xhr.onreadystatechange = function (event) {\n        onReadyStateChange(event);\n      };\n    }\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\n    }\n    xhr.open(method, url, true);\n    if (\"readyState\" in xhr) {\n      // workaround for Opera 12 issue with \"progress\" events\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, 0);\n    }\n  };\n  XHRWrapper.prototype.abort = function () {\n    this._abort(false);\n  };\n  XHRWrapper.prototype.getResponseHeader = function (name) {\n    return this._contentType;\n  };\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\n    var xhr = this._xhr;\n    if (\"setRequestHeader\" in xhr) {\n      xhr.setRequestHeader(name, value);\n    }\n  };\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\n  };\n  XHRWrapper.prototype.send = function () {\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || !(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype)) && document != undefined && document.readyState != undefined && document.readyState !== \"complete\") {\n      var that = this;\n      that._sendTimeout = setTimeout(function () {\n        that._sendTimeout = 0;\n        that.send();\n      }, 4);\n      return;\n    }\n    var xhr = this._xhr;\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\n    if (\"withCredentials\" in xhr) {\n      xhr.withCredentials = this.withCredentials;\n    }\n    try {\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\n      xhr.send(undefined);\n    } catch (error1) {\n      // Safari 5.1.7, Opera 12\n      throw error1;\n    }\n  };\n  function toLowerCase(name) {\n    return name.replace(/[A-Z]/g, function (c) {\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\n    });\n  }\n  function HeadersPolyfill(all) {\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\n    var map = Object.create(null);\n    var array = all.split(\"\\r\\n\");\n    for (var i = 0; i < array.length; i += 1) {\n      var line = array[i];\n      var parts = line.split(\": \");\n      var name = parts.shift();\n      var value = parts.join(\": \");\n      map[toLowerCase(name)] = value;\n    }\n    this._map = map;\n  }\n  HeadersPolyfill.prototype.get = function (name) {\n    return this._map[toLowerCase(name)];\n  };\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) {\n    // IE < 9, Firefox 3.6\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\n  }\n  function XHRTransport() {}\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n    xhr.open(\"GET\", url);\n    var offset = 0;\n    xhr.onprogress = function () {\n      var responseText = xhr.responseText;\n      var chunk = responseText.slice(offset);\n      offset += chunk.length;\n      onProgressCallback(chunk);\n    };\n    xhr.onerror = function (event) {\n      event.preventDefault();\n      onFinishCallback(new Error(\"NetworkError\"));\n    };\n    xhr.onload = function () {\n      onFinishCallback(null);\n    };\n    xhr.onabort = function () {\n      onFinishCallback(null);\n    };\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\n        var status = xhr.status;\n        var statusText = xhr.statusText;\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\n        var headers = xhr.getAllResponseHeaders();\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\n      }\n    };\n    xhr.withCredentials = withCredentials;\n    for (var name in headers) {\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\n        xhr.setRequestHeader(name, headers[name]);\n      }\n    }\n    xhr.send();\n    return xhr;\n  };\n  function HeadersWrapper(headers) {\n    this._headers = headers;\n  }\n  HeadersWrapper.prototype.get = function (name) {\n    return this._headers.get(name);\n  };\n  function FetchTransport() {}\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\n    var reader = null;\n    var controller = new AbortController();\n    var signal = controller.signal;\n    var textDecoder = new TextDecoder();\n    fetch(url, {\n      headers: headers,\n      credentials: withCredentials ? \"include\" : \"same-origin\",\n      signal: signal,\n      cache: \"no-store\"\n    }).then(function (response) {\n      reader = response.body.getReader();\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\n      // see https://github.com/promises-aplus/promises-spec/issues/179\n      return new Promise(function (resolve, reject) {\n        var readNextChunk = function () {\n          reader.read().then(function (result) {\n            if (result.done) {\n              //Note: bytes in textDecoder are ignored\n              resolve(undefined);\n            } else {\n              var chunk = textDecoder.decode(result.value, {\n                stream: true\n              });\n              onProgressCallback(chunk);\n              readNextChunk();\n            }\n          })[\"catch\"](function (error) {\n            reject(error);\n          });\n        };\n        readNextChunk();\n      });\n    })[\"catch\"](function (error) {\n      if (error.name === \"AbortError\") {\n        return undefined;\n      } else {\n        return error;\n      }\n    }).then(function (error) {\n      onFinishCallback(error);\n    });\n    return {\n      abort: function () {\n        if (reader != null) {\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\n        }\n        controller.abort();\n      }\n    };\n  };\n  function EventTarget() {\n    this._listeners = Object.create(null);\n  }\n  function throwError(e) {\n    setTimeout(function () {\n      throw e;\n    }, 0);\n  }\n  EventTarget.prototype.dispatchEvent = function (event) {\n    event.target = this;\n    var typeListeners = this._listeners[event.type];\n    if (typeListeners != undefined) {\n      var length = typeListeners.length;\n      for (var i = 0; i < length; i += 1) {\n        var listener = typeListeners[i];\n        try {\n          if (typeof listener.handleEvent === \"function\") {\n            listener.handleEvent(event);\n          } else {\n            listener.call(this, event);\n          }\n        } catch (e) {\n          throwError(e);\n        }\n      }\n    }\n  };\n  EventTarget.prototype.addEventListener = function (type, listener) {\n    type = String(type);\n    var listeners = this._listeners;\n    var typeListeners = listeners[type];\n    if (typeListeners == undefined) {\n      typeListeners = [];\n      listeners[type] = typeListeners;\n    }\n    var found = false;\n    for (var i = 0; i < typeListeners.length; i += 1) {\n      if (typeListeners[i] === listener) {\n        found = true;\n      }\n    }\n    if (!found) {\n      typeListeners.push(listener);\n    }\n  };\n  EventTarget.prototype.removeEventListener = function (type, listener) {\n    type = String(type);\n    var listeners = this._listeners;\n    var typeListeners = listeners[type];\n    if (typeListeners != undefined) {\n      var filtered = [];\n      for (var i = 0; i < typeListeners.length; i += 1) {\n        if (typeListeners[i] !== listener) {\n          filtered.push(typeListeners[i]);\n        }\n      }\n      if (filtered.length === 0) {\n        delete listeners[type];\n      } else {\n        listeners[type] = filtered;\n      }\n    }\n  };\n  function Event(type) {\n    this.type = type;\n    this.target = undefined;\n  }\n  function MessageEvent(type, options) {\n    Event.call(this, type);\n    this.data = options.data;\n    this.lastEventId = options.lastEventId;\n  }\n  MessageEvent.prototype = Object.create(Event.prototype);\n  function ConnectionEvent(type, options) {\n    Event.call(this, type);\n    this.status = options.status;\n    this.statusText = options.statusText;\n    this.headers = options.headers;\n  }\n  ConnectionEvent.prototype = Object.create(Event.prototype);\n  function ErrorEvent(type, options) {\n    Event.call(this, type);\n    this.error = options.error;\n  }\n  ErrorEvent.prototype = Object.create(Event.prototype);\n  var WAITING = -1;\n  var CONNECTING = 0;\n  var OPEN = 1;\n  var CLOSED = 2;\n  var AFTER_CR = -1;\n  var FIELD_START = 0;\n  var FIELD = 1;\n  var VALUE_START = 2;\n  var VALUE = 3;\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\n  var MINIMUM_DURATION = 1000;\n  var MAXIMUM_DURATION = 18000000;\n  var parseDuration = function (value, def) {\n    var n = value == null ? def : parseInt(value, 10);\n    if (n !== n) {\n      n = def;\n    }\n    return clampDuration(n);\n  };\n  var clampDuration = function (n) {\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\n  };\n  var fire = function (that, f, event) {\n    try {\n      if (typeof f === \"function\") {\n        f.call(that, event);\n      }\n    } catch (e) {\n      throwError(e);\n    }\n  };\n  function EventSourcePolyfill(url, options) {\n    EventTarget.call(this);\n    options = options || {};\n    this.onopen = undefined;\n    this.onmessage = undefined;\n    this.onerror = undefined;\n    this.url = undefined;\n    this.readyState = undefined;\n    this.withCredentials = undefined;\n    this.headers = undefined;\n    this._close = undefined;\n    start(this, url, options);\n  }\n  function getBestXHRTransport() {\n    return XMLHttpRequest != undefined && \"withCredentials\" in XMLHttpRequest.prototype || XDomainRequest == undefined ? new XMLHttpRequest() : new XDomainRequest();\n  }\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\n  function start(es, url, options) {\n    url = String(url);\n    var withCredentials = Boolean(options.withCredentials);\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\n    var initialRetry = clampDuration(1000);\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\n    var lastEventId = \"\";\n    var retry = initialRetry;\n    var wasActivity = false;\n    var textLength = 0;\n    var headers = options.headers || {};\n    var TransportOption = options.Transport;\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : xhr == undefined ? new FetchTransport() : new XHRTransport();\n    var abortController = undefined;\n    var timeout = 0;\n    var currentState = WAITING;\n    var dataBuffer = \"\";\n    var lastEventIdBuffer = \"\";\n    var eventTypeBuffer = \"\";\n    var textBuffer = \"\";\n    var state = FIELD_START;\n    var fieldStart = 0;\n    var valueStart = 0;\n    var onStart = function (status, statusText, contentType, headers) {\n      if (currentState === CONNECTING) {\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\n          currentState = OPEN;\n          wasActivity = Date.now();\n          retry = initialRetry;\n          es.readyState = OPEN;\n          var event = new ConnectionEvent(\"open\", {\n            status: status,\n            statusText: statusText,\n            headers: headers\n          });\n          es.dispatchEvent(event);\n          fire(es, es.onopen, event);\n        } else {\n          var message = \"\";\n          if (status !== 200) {\n            if (statusText) {\n              statusText = statusText.replace(/\\s+/g, \" \");\n            }\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\n          } else {\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\n          }\n          close();\n          var event = new ConnectionEvent(\"error\", {\n            status: status,\n            statusText: statusText,\n            headers: headers\n          });\n          es.dispatchEvent(event);\n          fire(es, es.onerror, event);\n          console.error(message);\n        }\n      }\n    };\n    var onProgress = function (textChunk) {\n      if (currentState === OPEN) {\n        var n = -1;\n        for (var i = 0; i < textChunk.length; i += 1) {\n          var c = textChunk.charCodeAt(i);\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\n            n = i;\n          }\n        }\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\n        if (textChunk !== \"\") {\n          wasActivity = Date.now();\n          textLength += textChunk.length;\n        }\n        for (var position = 0; position < chunk.length; position += 1) {\n          var c = chunk.charCodeAt(position);\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\n            state = FIELD_START;\n          } else {\n            if (state === AFTER_CR) {\n              state = FIELD_START;\n            }\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\n              if (state !== FIELD_START) {\n                if (state === FIELD) {\n                  valueStart = position + 1;\n                }\n                var field = chunk.slice(fieldStart, valueStart - 1);\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\n                if (field === \"data\") {\n                  dataBuffer += \"\\n\";\n                  dataBuffer += value;\n                } else if (field === \"id\") {\n                  lastEventIdBuffer = value;\n                } else if (field === \"event\") {\n                  eventTypeBuffer = value;\n                } else if (field === \"retry\") {\n                  initialRetry = parseDuration(value, initialRetry);\n                  retry = initialRetry;\n                } else if (field === \"heartbeatTimeout\") {\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\n                  if (timeout !== 0) {\n                    clearTimeout(timeout);\n                    timeout = setTimeout(function () {\n                      onTimeout();\n                    }, heartbeatTimeout);\n                  }\n                }\n              }\n              if (state === FIELD_START) {\n                if (dataBuffer !== \"\") {\n                  lastEventId = lastEventIdBuffer;\n                  if (eventTypeBuffer === \"\") {\n                    eventTypeBuffer = \"message\";\n                  }\n                  var event = new MessageEvent(eventTypeBuffer, {\n                    data: dataBuffer.slice(1),\n                    lastEventId: lastEventIdBuffer\n                  });\n                  es.dispatchEvent(event);\n                  if (eventTypeBuffer === \"open\") {\n                    fire(es, es.onopen, event);\n                  } else if (eventTypeBuffer === \"message\") {\n                    fire(es, es.onmessage, event);\n                  } else if (eventTypeBuffer === \"error\") {\n                    fire(es, es.onerror, event);\n                  }\n                  if (currentState === CLOSED) {\n                    return;\n                  }\n                }\n                dataBuffer = \"\";\n                eventTypeBuffer = \"\";\n              }\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\n            } else {\n              if (state === FIELD_START) {\n                fieldStart = position;\n                state = FIELD;\n              }\n              if (state === FIELD) {\n                if (c === \":\".charCodeAt(0)) {\n                  valueStart = position + 1;\n                  state = VALUE_START;\n                }\n              } else if (state === VALUE_START) {\n                state = VALUE;\n              }\n            }\n          }\n        }\n      }\n    };\n    var onFinish = function (error) {\n      if (currentState === OPEN || currentState === CONNECTING) {\n        currentState = WAITING;\n        if (timeout !== 0) {\n          clearTimeout(timeout);\n          timeout = 0;\n        }\n        timeout = setTimeout(function () {\n          onTimeout();\n        }, retry);\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\n        es.readyState = CONNECTING;\n        var event = new ErrorEvent(\"error\", {\n          error: error\n        });\n        es.dispatchEvent(event);\n        fire(es, es.onerror, event);\n        if (error != undefined) {\n          console.error(error);\n        }\n      }\n    };\n    var close = function () {\n      currentState = CLOSED;\n      if (abortController != undefined) {\n        abortController.abort();\n        abortController = undefined;\n      }\n      if (timeout !== 0) {\n        clearTimeout(timeout);\n        timeout = 0;\n      }\n      es.readyState = CLOSED;\n    };\n    var onTimeout = function () {\n      timeout = 0;\n      if (currentState !== WAITING) {\n        if (!wasActivity && abortController != undefined) {\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\n          if (abortController != undefined) {\n            abortController.abort();\n            abortController = undefined;\n          }\n        } else {\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\n          wasActivity = false;\n          timeout = setTimeout(function () {\n            onTimeout();\n          }, nextHeartbeat);\n        }\n        return;\n      }\n      wasActivity = false;\n      textLength = 0;\n      timeout = setTimeout(function () {\n        onTimeout();\n      }, heartbeatTimeout);\n      currentState = CONNECTING;\n      dataBuffer = \"\";\n      eventTypeBuffer = \"\";\n      lastEventIdBuffer = lastEventId;\n      textBuffer = \"\";\n      fieldStart = 0;\n      valueStart = 0;\n      state = FIELD_START;\n\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\n      var requestURL = url;\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\n        if (lastEventId !== \"\") {\n          // Remove the lastEventId parameter if it's already part of the request URL.\n          var i = url.indexOf(\"?\");\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\n            return paramName === lastEventIdQueryParameterName ? '' : p;\n          });\n          // Append the current lastEventId to the request URL.\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName + \"=\" + encodeURIComponent(lastEventId);\n        }\n      }\n      var withCredentials = es.withCredentials;\n      var requestHeaders = {};\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\n      var headers = es.headers;\n      if (headers != undefined) {\n        for (var name in headers) {\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\n            requestHeaders[name] = headers[name];\n          }\n        }\n      }\n      try {\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\n      } catch (error) {\n        close();\n        throw error;\n      }\n    };\n    es.url = url;\n    es.readyState = CONNECTING;\n    es.withCredentials = withCredentials;\n    es.headers = headers;\n    es._close = close;\n    onTimeout();\n  }\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\n  EventSourcePolyfill.prototype.OPEN = OPEN;\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\n  EventSourcePolyfill.prototype.close = function () {\n    this._close();\n  };\n  EventSourcePolyfill.CONNECTING = CONNECTING;\n  EventSourcePolyfill.OPEN = OPEN;\n  EventSourcePolyfill.CLOSED = CLOSED;\n  EventSourcePolyfill.prototype.withCredentials = undefined;\n  var R = NativeEventSource;\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\n    // Why replace a native EventSource ?\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\n    // https://code.google.com/p/chromium/issues/detail?id=260144\n    // https://code.google.com/p/chromium/issues/detail?id=225654\n    // ...\n    R = EventSourcePolyfill;\n  }\n  (function (factory) {\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\n      var v = factory(exports);\n      if (v !== undefined) module.exports = v;\n    } else if (typeof define === \"function\" && define.amd) {\n      define([\"exports\"], factory);\n    } else {\n      factory(global);\n    }\n  })(function (exports) {\n    exports.EventSourcePolyfill = EventSourcePolyfill;\n    exports.NativeEventSource = NativeEventSource;\n    exports.EventSource = R;\n  });\n})(typeof globalThis === 'undefined' ? typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this : globalThis);","map":{"version":3,"names":["global","setTimeout","clearTimeout","XMLHttpRequest","XDomainRequest","ActiveXObject","NativeEventSource","EventSource","document","Promise","fetch","Response","TextDecoder","TextEncoder","AbortController","window","body","readyState","addEventListener","event","Object","create","undefined","C","F","prototype","Date","now","getTime","originalFetch2","url","options","signal","headers","credentials","cache","then","response","reader","getReader","_reader","_aborted","cancel","status","statusText","abort","TextDecoderPolyfill","bitsNeeded","codePoint","decode","octets","valid","shift","octetsCount","Error","REPLACER","string","i","length","octet","String","fromCharCode","supportsStreamOption","encode","stream","error","console","debug","k","XHRWrapper","xhr","withCredentials","responseText","onprogress","onload","onerror","onreadystatechange","_contentType","_xhr","_sendTimeout","_abort","open","method","that","state","timeout","silent","onabort","onStart","contentType","getResponseHeader","onProgress","onFinish","type","preventDefault","TypeError","onReadyStateChange","onTimeout","indexOf","name","setRequestHeader","value","getAllResponseHeaders","send","error1","toLowerCase","replace","c","charCodeAt","HeadersPolyfill","all","map","array","split","line","parts","join","_map","get","HEADERS_RECEIVED","XHRTransport","onStartCallback","onProgressCallback","onFinishCallback","offset","chunk","slice","hasOwnProperty","call","HeadersWrapper","_headers","FetchTransport","controller","textDecoder","resolve","reject","readNextChunk","read","result","done","EventTarget","_listeners","throwError","e","dispatchEvent","target","typeListeners","listener","handleEvent","listeners","found","push","removeEventListener","filtered","Event","MessageEvent","data","lastEventId","ConnectionEvent","ErrorEvent","WAITING","CONNECTING","OPEN","CLOSED","AFTER_CR","FIELD_START","FIELD","VALUE_START","VALUE","contentTypeRegExp","MINIMUM_DURATION","MAXIMUM_DURATION","parseDuration","def","n","parseInt","clampDuration","Math","min","max","fire","f","EventSourcePolyfill","onopen","onmessage","_close","start","getBestXHRTransport","isFetchSupported","es","Boolean","lastEventIdQueryParameterName","initialRetry","heartbeatTimeout","retry","wasActivity","textLength","TransportOption","Transport","transport","abortController","currentState","dataBuffer","lastEventIdBuffer","eventTypeBuffer","textBuffer","fieldStart","valueStart","test","message","close","textChunk","position","field","nextHeartbeat","requestURL","p","paramName","encodeURIComponent","requestHeaders","R","factory","module","exports","v","define","amd","globalThis","self"],"sources":["C:/Projects/seattle-community-fridge/node_modules/event-source-polyfill/src/eventsource.js"],"sourcesContent":["/** @license\r\n * eventsource.js\r\n * Available under MIT License (MIT)\r\n * https://github.com/Yaffle/EventSource/\r\n */\r\n\r\n/*jslint indent: 2, vars: true, plusplus: true */\r\n/*global setTimeout, clearTimeout */\r\n\r\n(function (global) {\r\n  \"use strict\";\r\n\r\n  var setTimeout = global.setTimeout;\r\n  var clearTimeout = global.clearTimeout;\r\n  var XMLHttpRequest = global.XMLHttpRequest;\r\n  var XDomainRequest = global.XDomainRequest;\r\n  var ActiveXObject = global.ActiveXObject;\r\n  var NativeEventSource = global.EventSource;\r\n\r\n  var document = global.document;\r\n  var Promise = global.Promise;\r\n  var fetch = global.fetch;\r\n  var Response = global.Response;\r\n  var TextDecoder = global.TextDecoder;\r\n  var TextEncoder = global.TextEncoder;\r\n  var AbortController = global.AbortController;\r\n\r\n  if (typeof window !== \"undefined\" && typeof document !== \"undefined\" && !(\"readyState\" in document) && document.body == null) { // Firefox 2\r\n    document.readyState = \"loading\";\r\n    window.addEventListener(\"load\", function (event) {\r\n      document.readyState = \"complete\";\r\n    }, false);\r\n  }\r\n\r\n  if (XMLHttpRequest == null && ActiveXObject != null) { // https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest_in_IE6\r\n    XMLHttpRequest = function () {\r\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n    };\r\n  }\r\n\r\n  if (Object.create == undefined) {\r\n    Object.create = function (C) {\r\n      function F(){}\r\n      F.prototype = C;\r\n      return new F();\r\n    };\r\n  }\r\n\r\n  if (!Date.now) {\r\n    Date.now = function now() {\r\n      return new Date().getTime();\r\n    };\r\n  }\r\n\r\n  // see #118 (Promise#finally with polyfilled Promise)\r\n  // see #123 (data URLs crash Edge)\r\n  // see #125 (CSP violations)\r\n  // see pull/#138\r\n  // => No way to polyfill Promise#finally\r\n\r\n  if (AbortController == undefined) {\r\n    var originalFetch2 = fetch;\r\n    fetch = function (url, options) {\r\n      var signal = options.signal;\r\n      return originalFetch2(url, {headers: options.headers, credentials: options.credentials, cache: options.cache}).then(function (response) {\r\n        var reader = response.body.getReader();\r\n        signal._reader = reader;\r\n        if (signal._aborted) {\r\n          signal._reader.cancel();\r\n        }\r\n        return {\r\n          status: response.status,\r\n          statusText: response.statusText,\r\n          headers: response.headers,\r\n          body: {\r\n            getReader: function () {\r\n              return reader;\r\n            }\r\n          }\r\n        };\r\n      });\r\n    };\r\n    AbortController = function () {\r\n      this.signal = {\r\n        _reader: null,\r\n        _aborted: false\r\n      };\r\n      this.abort = function () {\r\n        if (this.signal._reader != null) {\r\n          this.signal._reader.cancel();\r\n        }\r\n        this.signal._aborted = true;\r\n      };\r\n    };\r\n  }\r\n\r\n  function TextDecoderPolyfill() {\r\n    this.bitsNeeded = 0;\r\n    this.codePoint = 0;\r\n  }\r\n\r\n  TextDecoderPolyfill.prototype.decode = function (octets) {\r\n    function valid(codePoint, shift, octetsCount) {\r\n      if (octetsCount === 1) {\r\n        return codePoint >= 0x0080 >> shift && codePoint << shift <= 0x07FF;\r\n      }\r\n      if (octetsCount === 2) {\r\n        return codePoint >= 0x0800 >> shift && codePoint << shift <= 0xD7FF || codePoint >= 0xE000 >> shift && codePoint << shift <= 0xFFFF;\r\n      }\r\n      if (octetsCount === 3) {\r\n        return codePoint >= 0x010000 >> shift && codePoint << shift <= 0x10FFFF;\r\n      }\r\n      throw new Error();\r\n    }\r\n    function octetsCount(bitsNeeded, codePoint) {\r\n      if (bitsNeeded === 6 * 1) {\r\n        return codePoint >> 6 > 15 ? 3 : codePoint > 31 ? 2 : 1;\r\n      }\r\n      if (bitsNeeded === 6 * 2) {\r\n        return codePoint > 15 ? 3 : 2;\r\n      }\r\n      if (bitsNeeded === 6 * 3) {\r\n        return 3;\r\n      }\r\n      throw new Error();\r\n    }\r\n    var REPLACER = 0xFFFD;\r\n    var string = \"\";\r\n    var bitsNeeded = this.bitsNeeded;\r\n    var codePoint = this.codePoint;\r\n    for (var i = 0; i < octets.length; i += 1) {\r\n      var octet = octets[i];\r\n      if (bitsNeeded !== 0) {\r\n        if (octet < 128 || octet > 191 || !valid(codePoint << 6 | octet & 63, bitsNeeded - 6, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n          string += String.fromCharCode(codePoint);\r\n        }\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (octet >= 0 && octet <= 127) {\r\n          bitsNeeded = 0;\r\n          codePoint = octet;\r\n        } else if (octet >= 192 && octet <= 223) {\r\n          bitsNeeded = 6 * 1;\r\n          codePoint = octet & 31;\r\n        } else if (octet >= 224 && octet <= 239) {\r\n          bitsNeeded = 6 * 2;\r\n          codePoint = octet & 15;\r\n        } else if (octet >= 240 && octet <= 247) {\r\n          bitsNeeded = 6 * 3;\r\n          codePoint = octet & 7;\r\n        } else {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n        if (bitsNeeded !== 0 && !valid(codePoint, bitsNeeded, octetsCount(bitsNeeded, codePoint))) {\r\n          bitsNeeded = 0;\r\n          codePoint = REPLACER;\r\n        }\r\n      } else {\r\n        bitsNeeded -= 6;\r\n        codePoint = codePoint << 6 | octet & 63;\r\n      }\r\n      if (bitsNeeded === 0) {\r\n        if (codePoint <= 0xFFFF) {\r\n          string += String.fromCharCode(codePoint);\r\n        } else {\r\n          string += String.fromCharCode(0xD800 + (codePoint - 0xFFFF - 1 >> 10));\r\n          string += String.fromCharCode(0xDC00 + (codePoint - 0xFFFF - 1 & 0x3FF));\r\n        }\r\n      }\r\n    }\r\n    this.bitsNeeded = bitsNeeded;\r\n    this.codePoint = codePoint;\r\n    return string;\r\n  };\r\n\r\n  // Firefox < 38 throws an error with stream option\r\n  var supportsStreamOption = function () {\r\n    try {\r\n      return new TextDecoder().decode(new TextEncoder().encode(\"test\"), {stream: true}) === \"test\";\r\n    } catch (error) {\r\n      console.debug(\"TextDecoder does not support streaming option. Using polyfill instead: \" + error);\r\n    }\r\n    return false;\r\n  };\r\n\r\n  // IE, Edge\r\n  if (TextDecoder == undefined || TextEncoder == undefined || !supportsStreamOption()) {\r\n    TextDecoder = TextDecoderPolyfill;\r\n  }\r\n\r\n  var k = function () {\r\n  };\r\n\r\n  function XHRWrapper(xhr) {\r\n    this.withCredentials = false;\r\n    this.readyState = 0;\r\n    this.status = 0;\r\n    this.statusText = \"\";\r\n    this.responseText = \"\";\r\n    this.onprogress = k;\r\n    this.onload = k;\r\n    this.onerror = k;\r\n    this.onreadystatechange = k;\r\n    this._contentType = \"\";\r\n    this._xhr = xhr;\r\n    this._sendTimeout = 0;\r\n    this._abort = k;\r\n  }\r\n\r\n  XHRWrapper.prototype.open = function (method, url) {\r\n    this._abort(true);\r\n\r\n    var that = this;\r\n    var xhr = this._xhr;\r\n    var state = 1;\r\n    var timeout = 0;\r\n\r\n    this._abort = function (silent) {\r\n      if (that._sendTimeout !== 0) {\r\n        clearTimeout(that._sendTimeout);\r\n        that._sendTimeout = 0;\r\n      }\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        xhr.onload = k;\r\n        xhr.onerror = k;\r\n        xhr.onabort = k;\r\n        xhr.onprogress = k;\r\n        xhr.onreadystatechange = k;\r\n        // IE 8 - 9: XDomainRequest#abort() does not fire any event\r\n        // Opera < 10: XMLHttpRequest#abort() does not fire any event\r\n        xhr.abort();\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        if (!silent) {\r\n          that.readyState = 4;\r\n          that.onabort(null);\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n      state = 0;\r\n    };\r\n\r\n    var onStart = function () {\r\n      if (state === 1) {\r\n        //state = 2;\r\n        var status = 0;\r\n        var statusText = \"\";\r\n        var contentType = undefined;\r\n        if (!(\"contentType\" in xhr)) {\r\n          try {\r\n            status = xhr.status;\r\n            statusText = xhr.statusText;\r\n            contentType = xhr.getResponseHeader(\"Content-Type\");\r\n          } catch (error) {\r\n            // IE < 10 throws exception for `xhr.status` when xhr.readyState === 2 || xhr.readyState === 3\r\n            // Opera < 11 throws exception for `xhr.status` when xhr.readyState === 2\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29121\r\n            status = 0;\r\n            statusText = \"\";\r\n            contentType = undefined;\r\n            // Firefox < 14, Chrome ?, Safari ?\r\n            // https://bugs.webkit.org/show_bug.cgi?id=29658\r\n            // https://bugs.webkit.org/show_bug.cgi?id=77854\r\n          }\r\n        } else {\r\n          status = 200;\r\n          statusText = \"OK\";\r\n          contentType = xhr.contentType;\r\n        }\r\n        if (status !== 0) {\r\n          state = 2;\r\n          that.readyState = 2;\r\n          that.status = status;\r\n          that.statusText = statusText;\r\n          that._contentType = contentType;\r\n          that.onreadystatechange();\r\n        }\r\n      }\r\n    };\r\n    var onProgress = function () {\r\n      onStart();\r\n      if (state === 2 || state === 3) {\r\n        state = 3;\r\n        var responseText = \"\";\r\n        try {\r\n          responseText = xhr.responseText;\r\n        } catch (error) {\r\n          // IE 8 - 9 with XMLHttpRequest\r\n        }\r\n        that.readyState = 3;\r\n        that.responseText = responseText;\r\n        that.onprogress();\r\n      }\r\n    };\r\n    var onFinish = function (type, event) {\r\n      if (event == null || event.preventDefault == null) {\r\n        event = {\r\n          preventDefault: k\r\n        };\r\n      }\r\n      // Firefox 52 fires \"readystatechange\" (xhr.readyState === 4) without final \"readystatechange\" (xhr.readyState === 3)\r\n      // IE 8 fires \"onload\" without \"onprogress\"\r\n      onProgress();\r\n      if (state === 1 || state === 2 || state === 3) {\r\n        state = 4;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        that.readyState = 4;\r\n        if (type === \"load\") {\r\n          that.onload(event);\r\n        } else if (type === \"error\") {\r\n          that.onerror(event);\r\n        } else if (type === \"abort\") {\r\n          that.onabort(event);\r\n        } else {\r\n          throw new TypeError();\r\n        }\r\n        that.onreadystatechange();\r\n      }\r\n    };\r\n    var onReadyStateChange = function (event) {\r\n      if (xhr != undefined) { // Opera 12\r\n        if (xhr.readyState === 4) {\r\n          if (!(\"onload\" in xhr) || !(\"onerror\" in xhr) || !(\"onabort\" in xhr)) {\r\n            onFinish(xhr.responseText === \"\" ? \"error\" : \"load\", event);\r\n          }\r\n        } else if (xhr.readyState === 3) {\r\n          if (!(\"onprogress\" in xhr)) { // testing XMLHttpRequest#responseText too many times is too slow in IE 11\r\n            // and in Firefox 3.6\r\n            onProgress();\r\n          }\r\n        } else if (xhr.readyState === 2) {\r\n          onStart();\r\n        }\r\n      }\r\n    };\r\n    var onTimeout = function () {\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 500);\r\n      if (xhr.readyState === 3) {\r\n        onProgress();\r\n      }\r\n    };\r\n\r\n    // XDomainRequest#abort removes onprogress, onerror, onload\r\n    if (\"onload\" in xhr) {\r\n      xhr.onload = function (event) {\r\n        onFinish(\"load\", event);\r\n      };\r\n    }\r\n    if (\"onerror\" in xhr) {\r\n      xhr.onerror = function (event) {\r\n        onFinish(\"error\", event);\r\n      };\r\n    }\r\n    // improper fix to match Firefox behaviour, but it is better than just ignore abort\r\n    // see https://bugzilla.mozilla.org/show_bug.cgi?id=768596\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=880200\r\n    // https://code.google.com/p/chromium/issues/detail?id=153570\r\n    // IE 8 fires \"onload\" without \"onprogress\r\n    if (\"onabort\" in xhr) {\r\n      xhr.onabort = function (event) {\r\n        onFinish(\"abort\", event);\r\n      };\r\n    }\r\n\r\n    if (\"onprogress\" in xhr) {\r\n      xhr.onprogress = onProgress;\r\n    }\r\n\r\n    // IE 8 - 9 (XMLHTTPRequest)\r\n    // Opera < 12\r\n    // Firefox < 3.5\r\n    // Firefox 3.5 - 3.6 - ? < 9.0\r\n    // onprogress is not fired sometimes or delayed\r\n    // see also #64 (significant lag in IE 11)\r\n    if (\"onreadystatechange\" in xhr) {\r\n      xhr.onreadystatechange = function (event) {\r\n        onReadyStateChange(event);\r\n      };\r\n    }\r\n\r\n    if (\"contentType\" in xhr || !(\"ontimeout\" in XMLHttpRequest.prototype)) {\r\n      url += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"padding=true\";\r\n    }\r\n    xhr.open(method, url, true);\r\n\r\n    if (\"readyState\" in xhr) {\r\n      // workaround for Opera 12 issue with \"progress\" events\r\n      // #91 (XMLHttpRequest onprogress not fired for streaming response in Edge 14-15-?)\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, 0);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.abort = function () {\r\n    this._abort(false);\r\n  };\r\n  XHRWrapper.prototype.getResponseHeader = function (name) {\r\n    return this._contentType;\r\n  };\r\n  XHRWrapper.prototype.setRequestHeader = function (name, value) {\r\n    var xhr = this._xhr;\r\n    if (\"setRequestHeader\" in xhr) {\r\n      xhr.setRequestHeader(name, value);\r\n    }\r\n  };\r\n  XHRWrapper.prototype.getAllResponseHeaders = function () {\r\n    // XMLHttpRequest#getAllResponseHeaders returns null for CORS requests in Firefox 3.6.28\r\n    return this._xhr.getAllResponseHeaders != undefined ? this._xhr.getAllResponseHeaders() || \"\" : \"\";\r\n  };\r\n  XHRWrapper.prototype.send = function () {\r\n    // loading indicator in Safari < ? (6), Chrome < 14, Firefox\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=736723\r\n    if ((!(\"ontimeout\" in XMLHttpRequest.prototype) || (!(\"sendAsBinary\" in XMLHttpRequest.prototype) && !(\"mozAnon\" in XMLHttpRequest.prototype))) &&\r\n        document != undefined &&\r\n        document.readyState != undefined &&\r\n        document.readyState !== \"complete\") {\r\n      var that = this;\r\n      that._sendTimeout = setTimeout(function () {\r\n        that._sendTimeout = 0;\r\n        that.send();\r\n      }, 4);\r\n      return;\r\n    }\r\n\r\n    var xhr = this._xhr;\r\n    // withCredentials should be set after \"open\" for Safari and Chrome (< 19 ?)\r\n    if (\"withCredentials\" in xhr) {\r\n      xhr.withCredentials = this.withCredentials;\r\n    }\r\n    try {\r\n      // xhr.send(); throws \"Not enough arguments\" in Firefox 3.0\r\n      xhr.send(undefined);\r\n    } catch (error1) {\r\n      // Safari 5.1.7, Opera 12\r\n      throw error1;\r\n    }\r\n  };\r\n\r\n  function toLowerCase(name) {\r\n    return name.replace(/[A-Z]/g, function (c) {\r\n      return String.fromCharCode(c.charCodeAt(0) + 0x20);\r\n    });\r\n  }\r\n\r\n  function HeadersPolyfill(all) {\r\n    // Get headers: implemented according to mozilla's example code: https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/getAllResponseHeaders#Example\r\n    var map = Object.create(null);\r\n    var array = all.split(\"\\r\\n\");\r\n    for (var i = 0; i < array.length; i += 1) {\r\n      var line = array[i];\r\n      var parts = line.split(\": \");\r\n      var name = parts.shift();\r\n      var value = parts.join(\": \");\r\n      map[toLowerCase(name)] = value;\r\n    }\r\n    this._map = map;\r\n  }\r\n  HeadersPolyfill.prototype.get = function (name) {\r\n    return this._map[toLowerCase(name)];\r\n  };\r\n\r\n  if (XMLHttpRequest != null && XMLHttpRequest.HEADERS_RECEIVED == null) { // IE < 9, Firefox 3.6\r\n    XMLHttpRequest.HEADERS_RECEIVED = 2;\r\n  }\r\n\r\n  function XHRTransport() {\r\n  }\r\n\r\n  XHRTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    xhr.open(\"GET\", url);\r\n    var offset = 0;\r\n    xhr.onprogress = function () {\r\n      var responseText = xhr.responseText;\r\n      var chunk = responseText.slice(offset);\r\n      offset += chunk.length;\r\n      onProgressCallback(chunk);\r\n    };\r\n    xhr.onerror = function (event) {\r\n      event.preventDefault();\r\n      onFinishCallback(new Error(\"NetworkError\"));\r\n    };\r\n    xhr.onload = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onabort = function () {\r\n      onFinishCallback(null);\r\n    };\r\n    xhr.onreadystatechange = function () {\r\n      if (xhr.readyState === XMLHttpRequest.HEADERS_RECEIVED) {\r\n        var status = xhr.status;\r\n        var statusText = xhr.statusText;\r\n        var contentType = xhr.getResponseHeader(\"Content-Type\");\r\n        var headers = xhr.getAllResponseHeaders();\r\n        onStartCallback(status, statusText, contentType, new HeadersPolyfill(headers));\r\n      }\r\n    };\r\n    xhr.withCredentials = withCredentials;\r\n    for (var name in headers) {\r\n      if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n        xhr.setRequestHeader(name, headers[name]);\r\n      }\r\n    }\r\n    xhr.send();\r\n    return xhr;\r\n  };\r\n\r\n  function HeadersWrapper(headers) {\r\n    this._headers = headers;\r\n  }\r\n  HeadersWrapper.prototype.get = function (name) {\r\n    return this._headers.get(name);\r\n  };\r\n\r\n  function FetchTransport() {\r\n  }\r\n\r\n  FetchTransport.prototype.open = function (xhr, onStartCallback, onProgressCallback, onFinishCallback, url, withCredentials, headers) {\r\n    var reader = null;\r\n    var controller = new AbortController();\r\n    var signal = controller.signal;\r\n    var textDecoder = new TextDecoder();\r\n    fetch(url, {\r\n      headers: headers,\r\n      credentials: withCredentials ? \"include\" : \"same-origin\",\r\n      signal: signal,\r\n      cache: \"no-store\"\r\n    }).then(function (response) {\r\n      reader = response.body.getReader();\r\n      onStartCallback(response.status, response.statusText, response.headers.get(\"Content-Type\"), new HeadersWrapper(response.headers));\r\n      // see https://github.com/promises-aplus/promises-spec/issues/179\r\n      return new Promise(function (resolve, reject) {\r\n        var readNextChunk = function () {\r\n          reader.read().then(function (result) {\r\n            if (result.done) {\r\n              //Note: bytes in textDecoder are ignored\r\n              resolve(undefined);\r\n            } else {\r\n              var chunk = textDecoder.decode(result.value, {stream: true});\r\n              onProgressCallback(chunk);\r\n              readNextChunk();\r\n            }\r\n          })[\"catch\"](function (error) {\r\n            reject(error);\r\n          });\r\n        };\r\n        readNextChunk();\r\n      });\r\n    })[\"catch\"](function (error) {\r\n      if (error.name === \"AbortError\") {\r\n        return undefined;\r\n      } else {\r\n        return error;\r\n      }\r\n    }).then(function (error) {\r\n      onFinishCallback(error);\r\n    });\r\n    return {\r\n      abort: function () {\r\n        if (reader != null) {\r\n          reader.cancel(); // https://bugzilla.mozilla.org/show_bug.cgi?id=1583815\r\n        }\r\n        controller.abort();\r\n      }\r\n    };\r\n  };\r\n\r\n  function EventTarget() {\r\n    this._listeners = Object.create(null);\r\n  }\r\n\r\n  function throwError(e) {\r\n    setTimeout(function () {\r\n      throw e;\r\n    }, 0);\r\n  }\r\n\r\n  EventTarget.prototype.dispatchEvent = function (event) {\r\n    event.target = this;\r\n    var typeListeners = this._listeners[event.type];\r\n    if (typeListeners != undefined) {\r\n      var length = typeListeners.length;\r\n      for (var i = 0; i < length; i += 1) {\r\n        var listener = typeListeners[i];\r\n        try {\r\n          if (typeof listener.handleEvent === \"function\") {\r\n            listener.handleEvent(event);\r\n          } else {\r\n            listener.call(this, event);\r\n          }\r\n        } catch (e) {\r\n          throwError(e);\r\n        }\r\n      }\r\n    }\r\n  };\r\n  EventTarget.prototype.addEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners == undefined) {\r\n      typeListeners = [];\r\n      listeners[type] = typeListeners;\r\n    }\r\n    var found = false;\r\n    for (var i = 0; i < typeListeners.length; i += 1) {\r\n      if (typeListeners[i] === listener) {\r\n        found = true;\r\n      }\r\n    }\r\n    if (!found) {\r\n      typeListeners.push(listener);\r\n    }\r\n  };\r\n  EventTarget.prototype.removeEventListener = function (type, listener) {\r\n    type = String(type);\r\n    var listeners = this._listeners;\r\n    var typeListeners = listeners[type];\r\n    if (typeListeners != undefined) {\r\n      var filtered = [];\r\n      for (var i = 0; i < typeListeners.length; i += 1) {\r\n        if (typeListeners[i] !== listener) {\r\n          filtered.push(typeListeners[i]);\r\n        }\r\n      }\r\n      if (filtered.length === 0) {\r\n        delete listeners[type];\r\n      } else {\r\n        listeners[type] = filtered;\r\n      }\r\n    }\r\n  };\r\n\r\n  function Event(type) {\r\n    this.type = type;\r\n    this.target = undefined;\r\n  }\r\n\r\n  function MessageEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.data = options.data;\r\n    this.lastEventId = options.lastEventId;\r\n  }\r\n\r\n  MessageEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ConnectionEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.status = options.status;\r\n    this.statusText = options.statusText;\r\n    this.headers = options.headers;\r\n  }\r\n\r\n  ConnectionEvent.prototype = Object.create(Event.prototype);\r\n\r\n  function ErrorEvent(type, options) {\r\n    Event.call(this, type);\r\n    this.error = options.error;\r\n  }\r\n\r\n  ErrorEvent.prototype = Object.create(Event.prototype);\r\n\r\n  var WAITING = -1;\r\n  var CONNECTING = 0;\r\n  var OPEN = 1;\r\n  var CLOSED = 2;\r\n\r\n  var AFTER_CR = -1;\r\n  var FIELD_START = 0;\r\n  var FIELD = 1;\r\n  var VALUE_START = 2;\r\n  var VALUE = 3;\r\n\r\n  var contentTypeRegExp = /^text\\/event\\-stream(;.*)?$/i;\r\n\r\n  var MINIMUM_DURATION = 1000;\r\n  var MAXIMUM_DURATION = 18000000;\r\n\r\n  var parseDuration = function (value, def) {\r\n    var n = value == null ? def : parseInt(value, 10);\r\n    if (n !== n) {\r\n      n = def;\r\n    }\r\n    return clampDuration(n);\r\n  };\r\n  var clampDuration = function (n) {\r\n    return Math.min(Math.max(n, MINIMUM_DURATION), MAXIMUM_DURATION);\r\n  };\r\n\r\n  var fire = function (that, f, event) {\r\n    try {\r\n      if (typeof f === \"function\") {\r\n        f.call(that, event);\r\n      }\r\n    } catch (e) {\r\n      throwError(e);\r\n    }\r\n  };\r\n\r\n  function EventSourcePolyfill(url, options) {\r\n    EventTarget.call(this);\r\n    options = options || {};\r\n\r\n    this.onopen = undefined;\r\n    this.onmessage = undefined;\r\n    this.onerror = undefined;\r\n\r\n    this.url = undefined;\r\n    this.readyState = undefined;\r\n    this.withCredentials = undefined;\r\n    this.headers = undefined;\r\n\r\n    this._close = undefined;\r\n\r\n    start(this, url, options);\r\n  }\r\n\r\n  function getBestXHRTransport() {\r\n    return (XMLHttpRequest != undefined && (\"withCredentials\" in XMLHttpRequest.prototype)) || XDomainRequest == undefined\r\n        ? new XMLHttpRequest()\r\n        : new XDomainRequest();\r\n  }\r\n\r\n  var isFetchSupported = fetch != undefined && Response != undefined && \"body\" in Response.prototype;\r\n\r\n  function start(es, url, options) {\r\n    url = String(url);\r\n    var withCredentials = Boolean(options.withCredentials);\r\n    var lastEventIdQueryParameterName = options.lastEventIdQueryParameterName || \"lastEventId\";\r\n\r\n    var initialRetry = clampDuration(1000);\r\n    var heartbeatTimeout = parseDuration(options.heartbeatTimeout, 45000);\r\n\r\n    var lastEventId = \"\";\r\n    var retry = initialRetry;\r\n    var wasActivity = false;\r\n    var textLength = 0;\r\n    var headers = options.headers || {};\r\n    var TransportOption = options.Transport;\r\n    var xhr = isFetchSupported && TransportOption == undefined ? undefined : new XHRWrapper(TransportOption != undefined ? new TransportOption() : getBestXHRTransport());\r\n    var transport = TransportOption != null && typeof TransportOption !== \"string\" ? new TransportOption() : (xhr == undefined ? new FetchTransport() : new XHRTransport());\r\n    var abortController = undefined;\r\n    var timeout = 0;\r\n    var currentState = WAITING;\r\n    var dataBuffer = \"\";\r\n    var lastEventIdBuffer = \"\";\r\n    var eventTypeBuffer = \"\";\r\n\r\n    var textBuffer = \"\";\r\n    var state = FIELD_START;\r\n    var fieldStart = 0;\r\n    var valueStart = 0;\r\n\r\n    var onStart = function (status, statusText, contentType, headers) {\r\n      if (currentState === CONNECTING) {\r\n        if (status === 200 && contentType != undefined && contentTypeRegExp.test(contentType)) {\r\n          currentState = OPEN;\r\n          wasActivity = Date.now();\r\n          retry = initialRetry;\r\n          es.readyState = OPEN;\r\n          var event = new ConnectionEvent(\"open\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onopen, event);\r\n        } else {\r\n          var message = \"\";\r\n          if (status !== 200) {\r\n            if (statusText) {\r\n              statusText = statusText.replace(/\\s+/g, \" \");\r\n            }\r\n            message = \"EventSource's response has a status \" + status + \" \" + statusText + \" that is not 200. Aborting the connection.\";\r\n          } else {\r\n            message = \"EventSource's response has a Content-Type specifying an unsupported type: \" + (contentType == undefined ? \"-\" : contentType.replace(/\\s+/g, \" \")) + \". Aborting the connection.\";\r\n          }\r\n          close();\r\n          var event = new ConnectionEvent(\"error\", {\r\n            status: status,\r\n            statusText: statusText,\r\n            headers: headers\r\n          });\r\n          es.dispatchEvent(event);\r\n          fire(es, es.onerror, event);\r\n          console.error(message);\r\n        }\r\n      }\r\n    };\r\n\r\n    var onProgress = function (textChunk) {\r\n      if (currentState === OPEN) {\r\n        var n = -1;\r\n        for (var i = 0; i < textChunk.length; i += 1) {\r\n          var c = textChunk.charCodeAt(i);\r\n          if (c === \"\\n\".charCodeAt(0) || c === \"\\r\".charCodeAt(0)) {\r\n            n = i;\r\n          }\r\n        }\r\n        var chunk = (n !== -1 ? textBuffer : \"\") + textChunk.slice(0, n + 1);\r\n        textBuffer = (n === -1 ? textBuffer : \"\") + textChunk.slice(n + 1);\r\n        if (textChunk !== \"\") {\r\n          wasActivity = Date.now();\r\n          textLength += textChunk.length;\r\n        }\r\n        for (var position = 0; position < chunk.length; position += 1) {\r\n          var c = chunk.charCodeAt(position);\r\n          if (state === AFTER_CR && c === \"\\n\".charCodeAt(0)) {\r\n            state = FIELD_START;\r\n          } else {\r\n            if (state === AFTER_CR) {\r\n              state = FIELD_START;\r\n            }\r\n            if (c === \"\\r\".charCodeAt(0) || c === \"\\n\".charCodeAt(0)) {\r\n              if (state !== FIELD_START) {\r\n                if (state === FIELD) {\r\n                  valueStart = position + 1;\r\n                }\r\n                var field = chunk.slice(fieldStart, valueStart - 1);\r\n                var value = chunk.slice(valueStart + (valueStart < position && chunk.charCodeAt(valueStart) === \" \".charCodeAt(0) ? 1 : 0), position);\r\n                if (field === \"data\") {\r\n                  dataBuffer += \"\\n\";\r\n                  dataBuffer += value;\r\n                } else if (field === \"id\") {\r\n                  lastEventIdBuffer = value;\r\n                } else if (field === \"event\") {\r\n                  eventTypeBuffer = value;\r\n                } else if (field === \"retry\") {\r\n                  initialRetry = parseDuration(value, initialRetry);\r\n                  retry = initialRetry;\r\n                } else if (field === \"heartbeatTimeout\") {\r\n                  heartbeatTimeout = parseDuration(value, heartbeatTimeout);\r\n                  if (timeout !== 0) {\r\n                    clearTimeout(timeout);\r\n                    timeout = setTimeout(function () {\r\n                      onTimeout();\r\n                    }, heartbeatTimeout);\r\n                  }\r\n                }\r\n              }\r\n              if (state === FIELD_START) {\r\n                if (dataBuffer !== \"\") {\r\n                  lastEventId = lastEventIdBuffer;\r\n                  if (eventTypeBuffer === \"\") {\r\n                    eventTypeBuffer = \"message\";\r\n                  }\r\n                  var event = new MessageEvent(eventTypeBuffer, {\r\n                    data: dataBuffer.slice(1),\r\n                    lastEventId: lastEventIdBuffer\r\n                  });\r\n                  es.dispatchEvent(event);\r\n                  if (eventTypeBuffer === \"open\") {\r\n                    fire(es, es.onopen, event);\r\n                  } else if (eventTypeBuffer === \"message\") {\r\n                    fire(es, es.onmessage, event);\r\n                  } else if (eventTypeBuffer === \"error\") {\r\n                    fire(es, es.onerror, event);\r\n                  }\r\n                  if (currentState === CLOSED) {\r\n                    return;\r\n                  }\r\n                }\r\n                dataBuffer = \"\";\r\n                eventTypeBuffer = \"\";\r\n              }\r\n              state = c === \"\\r\".charCodeAt(0) ? AFTER_CR : FIELD_START;\r\n            } else {\r\n              if (state === FIELD_START) {\r\n                fieldStart = position;\r\n                state = FIELD;\r\n              }\r\n              if (state === FIELD) {\r\n                if (c === \":\".charCodeAt(0)) {\r\n                  valueStart = position + 1;\r\n                  state = VALUE_START;\r\n                }\r\n              } else if (state === VALUE_START) {\r\n                state = VALUE;\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    var onFinish = function (error) {\r\n      if (currentState === OPEN || currentState === CONNECTING) {\r\n        currentState = WAITING;\r\n        if (timeout !== 0) {\r\n          clearTimeout(timeout);\r\n          timeout = 0;\r\n        }\r\n        timeout = setTimeout(function () {\r\n          onTimeout();\r\n        }, retry);\r\n        retry = clampDuration(Math.min(initialRetry * 16, retry * 2));\r\n\r\n        es.readyState = CONNECTING;\r\n        var event = new ErrorEvent(\"error\", {error: error});\r\n        es.dispatchEvent(event);\r\n        fire(es, es.onerror, event);\r\n        if (error != undefined) {\r\n          console.error(error);\r\n        }\r\n      }\r\n    };\r\n\r\n    var close = function () {\r\n      currentState = CLOSED;\r\n      if (abortController != undefined) {\r\n        abortController.abort();\r\n        abortController = undefined;\r\n      }\r\n      if (timeout !== 0) {\r\n        clearTimeout(timeout);\r\n        timeout = 0;\r\n      }\r\n      es.readyState = CLOSED;\r\n    };\r\n\r\n    var onTimeout = function () {\r\n      timeout = 0;\r\n\r\n      if (currentState !== WAITING) {\r\n        if (!wasActivity && abortController != undefined) {\r\n          onFinish(new Error(\"No activity within \" + heartbeatTimeout + \" milliseconds.\" + \" \" + (currentState === CONNECTING ? \"No response received.\" : textLength + \" chars received.\") + \" \" + \"Reconnecting.\"));\r\n          if (abortController != undefined) {\r\n            abortController.abort();\r\n            abortController = undefined;\r\n          }\r\n        } else {\r\n          var nextHeartbeat = Math.max((wasActivity || Date.now()) + heartbeatTimeout - Date.now(), 1);\r\n          wasActivity = false;\r\n          timeout = setTimeout(function () {\r\n            onTimeout();\r\n          }, nextHeartbeat);\r\n        }\r\n        return;\r\n      }\r\n\r\n      wasActivity = false;\r\n      textLength = 0;\r\n      timeout = setTimeout(function () {\r\n        onTimeout();\r\n      }, heartbeatTimeout);\r\n\r\n      currentState = CONNECTING;\r\n      dataBuffer = \"\";\r\n      eventTypeBuffer = \"\";\r\n      lastEventIdBuffer = lastEventId;\r\n      textBuffer = \"\";\r\n      fieldStart = 0;\r\n      valueStart = 0;\r\n      state = FIELD_START;\r\n\r\n      // https://bugzilla.mozilla.org/show_bug.cgi?id=428916\r\n      // Request header field Last-Event-ID is not allowed by Access-Control-Allow-Headers.\r\n      var requestURL = url;\r\n      if (url.slice(0, 5) !== \"data:\" && url.slice(0, 5) !== \"blob:\") {\r\n        if (lastEventId !== \"\") {\r\n          // Remove the lastEventId parameter if it's already part of the request URL.\r\n          var i = url.indexOf(\"?\");\r\n          requestURL = i === -1 ? url : url.slice(0, i + 1) + url.slice(i + 1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g, function (p, paramName) {\r\n            return paramName === lastEventIdQueryParameterName ? '' : p;\r\n          });\r\n          // Append the current lastEventId to the request URL.\r\n          requestURL += (url.indexOf(\"?\") === -1 ? \"?\" : \"&\") + lastEventIdQueryParameterName +\"=\" + encodeURIComponent(lastEventId);\r\n        }\r\n      }\r\n      var withCredentials = es.withCredentials;\r\n      var requestHeaders = {};\r\n      requestHeaders[\"Accept\"] = \"text/event-stream\";\r\n      var headers = es.headers;\r\n      if (headers != undefined) {\r\n        for (var name in headers) {\r\n          if (Object.prototype.hasOwnProperty.call(headers, name)) {\r\n            requestHeaders[name] = headers[name];\r\n          }\r\n        }\r\n      }\r\n      try {\r\n        abortController = transport.open(xhr, onStart, onProgress, onFinish, requestURL, withCredentials, requestHeaders);\r\n      } catch (error) {\r\n        close();\r\n        throw error;\r\n      }\r\n    };\r\n\r\n    es.url = url;\r\n    es.readyState = CONNECTING;\r\n    es.withCredentials = withCredentials;\r\n    es.headers = headers;\r\n    es._close = close;\r\n\r\n    onTimeout();\r\n  }\r\n\r\n  EventSourcePolyfill.prototype = Object.create(EventTarget.prototype);\r\n  EventSourcePolyfill.prototype.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.prototype.OPEN = OPEN;\r\n  EventSourcePolyfill.prototype.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.close = function () {\r\n    this._close();\r\n  };\r\n\r\n  EventSourcePolyfill.CONNECTING = CONNECTING;\r\n  EventSourcePolyfill.OPEN = OPEN;\r\n  EventSourcePolyfill.CLOSED = CLOSED;\r\n  EventSourcePolyfill.prototype.withCredentials = undefined;\r\n\r\n  var R = NativeEventSource\r\n  if (XMLHttpRequest != undefined && (NativeEventSource == undefined || !(\"withCredentials\" in NativeEventSource.prototype))) {\r\n    // Why replace a native EventSource ?\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=444328\r\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=831392\r\n    // https://code.google.com/p/chromium/issues/detail?id=260144\r\n    // https://code.google.com/p/chromium/issues/detail?id=225654\r\n    // ...\r\n    R = EventSourcePolyfill;\r\n  }\r\n\r\n  (function (factory) {\r\n    if (typeof module === \"object\" && typeof module.exports === \"object\") {\r\n      var v = factory(exports);\r\n      if (v !== undefined) module.exports = v;\r\n    }\r\n    else if (typeof define === \"function\" && define.amd) {\r\n      define([\"exports\"], factory);\r\n    }\r\n    else {\r\n      factory(global);\r\n    }\r\n  })(function (exports) {\r\n    exports.EventSourcePolyfill = EventSourcePolyfill;\r\n    exports.NativeEventSource = NativeEventSource;\r\n    exports.EventSource = R;\r\n  });\r\n}(typeof globalThis === 'undefined' ? (typeof window !== 'undefined' ? window : typeof self !== 'undefined' ? self : this) : globalThis));\r\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEC,WAAUA,MAAM,EAAE;EACjB,YAAY;;EAEZ,IAAIC,UAAU,GAAGD,MAAM,CAACC,UAAU;EAClC,IAAIC,YAAY,GAAGF,MAAM,CAACE,YAAY;EACtC,IAAIC,cAAc,GAAGH,MAAM,CAACG,cAAc;EAC1C,IAAIC,cAAc,GAAGJ,MAAM,CAACI,cAAc;EAC1C,IAAIC,aAAa,GAAGL,MAAM,CAACK,aAAa;EACxC,IAAIC,iBAAiB,GAAGN,MAAM,CAACO,WAAW;EAE1C,IAAIC,QAAQ,GAAGR,MAAM,CAACQ,QAAQ;EAC9B,IAAIC,OAAO,GAAGT,MAAM,CAACS,OAAO;EAC5B,IAAIC,KAAK,GAAGV,MAAM,CAACU,KAAK;EACxB,IAAIC,QAAQ,GAAGX,MAAM,CAACW,QAAQ;EAC9B,IAAIC,WAAW,GAAGZ,MAAM,CAACY,WAAW;EACpC,IAAIC,WAAW,GAAGb,MAAM,CAACa,WAAW;EACpC,IAAIC,eAAe,GAAGd,MAAM,CAACc,eAAe;EAE5C,IAAI,OAAOC,MAAM,KAAK,WAAW,IAAI,OAAOP,QAAQ,KAAK,WAAW,IAAI,EAAE,YAAY,IAAIA,QAAQ,CAAC,IAAIA,QAAQ,CAACQ,IAAI,IAAI,IAAI,EAAE;IAAE;IAC9HR,QAAQ,CAACS,UAAU,GAAG,SAAS;IAC/BF,MAAM,CAACG,gBAAgB,CAAC,MAAM,EAAE,UAAUC,KAAK,EAAE;MAC/CX,QAAQ,CAACS,UAAU,GAAG,UAAU;IAClC,CAAC,EAAE,KAAK,CAAC;EACX;EAEA,IAAId,cAAc,IAAI,IAAI,IAAIE,aAAa,IAAI,IAAI,EAAE;IAAE;IACrDF,cAAc,GAAG,SAAAA,CAAA,EAAY;MAC3B,OAAO,IAAIE,aAAa,CAAC,mBAAmB,CAAC;IAC/C,CAAC;EACH;EAEA,IAAIe,MAAM,CAACC,MAAM,IAAIC,SAAS,EAAE;IAC9BF,MAAM,CAACC,MAAM,GAAG,UAAUE,CAAC,EAAE;MAC3B,SAASC,CAACA,CAAA,EAAE,CAAC;MACbA,CAAC,CAACC,SAAS,GAAGF,CAAC;MACf,OAAO,IAAIC,CAAC,CAAC,CAAC;IAChB,CAAC;EACH;EAEA,IAAI,CAACE,IAAI,CAACC,GAAG,EAAE;IACbD,IAAI,CAACC,GAAG,GAAG,SAASA,GAAGA,CAAA,EAAG;MACxB,OAAO,IAAID,IAAI,CAAC,CAAC,CAACE,OAAO,CAAC,CAAC;IAC7B,CAAC;EACH;;EAEA;EACA;EACA;EACA;EACA;;EAEA,IAAId,eAAe,IAAIQ,SAAS,EAAE;IAChC,IAAIO,cAAc,GAAGnB,KAAK;IAC1BA,KAAK,GAAG,SAAAA,CAAUoB,GAAG,EAAEC,OAAO,EAAE;MAC9B,IAAIC,MAAM,GAAGD,OAAO,CAACC,MAAM;MAC3B,OAAOH,cAAc,CAACC,GAAG,EAAE;QAACG,OAAO,EAAEF,OAAO,CAACE,OAAO;QAAEC,WAAW,EAAEH,OAAO,CAACG,WAAW;QAAEC,KAAK,EAAEJ,OAAO,CAACI;MAAK,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,QAAQ,EAAE;QACtI,IAAIC,MAAM,GAAGD,QAAQ,CAACrB,IAAI,CAACuB,SAAS,CAAC,CAAC;QACtCP,MAAM,CAACQ,OAAO,GAAGF,MAAM;QACvB,IAAIN,MAAM,CAACS,QAAQ,EAAE;UACnBT,MAAM,CAACQ,OAAO,CAACE,MAAM,CAAC,CAAC;QACzB;QACA,OAAO;UACLC,MAAM,EAAEN,QAAQ,CAACM,MAAM;UACvBC,UAAU,EAAEP,QAAQ,CAACO,UAAU;UAC/BX,OAAO,EAAEI,QAAQ,CAACJ,OAAO;UACzBjB,IAAI,EAAE;YACJuB,SAAS,EAAE,SAAAA,CAAA,EAAY;cACrB,OAAOD,MAAM;YACf;UACF;QACF,CAAC;MACH,CAAC,CAAC;IACJ,CAAC;IACDxB,eAAe,GAAG,SAAAA,CAAA,EAAY;MAC5B,IAAI,CAACkB,MAAM,GAAG;QACZQ,OAAO,EAAE,IAAI;QACbC,QAAQ,EAAE;MACZ,CAAC;MACD,IAAI,CAACI,KAAK,GAAG,YAAY;QACvB,IAAI,IAAI,CAACb,MAAM,CAACQ,OAAO,IAAI,IAAI,EAAE;UAC/B,IAAI,CAACR,MAAM,CAACQ,OAAO,CAACE,MAAM,CAAC,CAAC;QAC9B;QACA,IAAI,CAACV,MAAM,CAACS,QAAQ,GAAG,IAAI;MAC7B,CAAC;IACH,CAAC;EACH;EAEA,SAASK,mBAAmBA,CAAA,EAAG;IAC7B,IAAI,CAACC,UAAU,GAAG,CAAC;IACnB,IAAI,CAACC,SAAS,GAAG,CAAC;EACpB;EAEAF,mBAAmB,CAACrB,SAAS,CAACwB,MAAM,GAAG,UAAUC,MAAM,EAAE;IACvD,SAASC,KAAKA,CAACH,SAAS,EAAEI,KAAK,EAAEC,WAAW,EAAE;MAC5C,IAAIA,WAAW,KAAK,CAAC,EAAE;QACrB,OAAOL,SAAS,IAAI,MAAM,IAAII,KAAK,IAAIJ,SAAS,IAAII,KAAK,IAAI,MAAM;MACrE;MACA,IAAIC,WAAW,KAAK,CAAC,EAAE;QACrB,OAAOL,SAAS,IAAI,MAAM,IAAII,KAAK,IAAIJ,SAAS,IAAII,KAAK,IAAI,MAAM,IAAIJ,SAAS,IAAI,MAAM,IAAII,KAAK,IAAIJ,SAAS,IAAII,KAAK,IAAI,MAAM;MACrI;MACA,IAAIC,WAAW,KAAK,CAAC,EAAE;QACrB,OAAOL,SAAS,IAAI,QAAQ,IAAII,KAAK,IAAIJ,SAAS,IAAII,KAAK,IAAI,QAAQ;MACzE;MACA,MAAM,IAAIE,KAAK,CAAC,CAAC;IACnB;IACA,SAASD,WAAWA,CAACN,UAAU,EAAEC,SAAS,EAAE;MAC1C,IAAID,UAAU,KAAK,CAAC,GAAG,CAAC,EAAE;QACxB,OAAOC,SAAS,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,GAAGA,SAAS,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC;MACzD;MACA,IAAID,UAAU,KAAK,CAAC,GAAG,CAAC,EAAE;QACxB,OAAOC,SAAS,GAAG,EAAE,GAAG,CAAC,GAAG,CAAC;MAC/B;MACA,IAAID,UAAU,KAAK,CAAC,GAAG,CAAC,EAAE;QACxB,OAAO,CAAC;MACV;MACA,MAAM,IAAIO,KAAK,CAAC,CAAC;IACnB;IACA,IAAIC,QAAQ,GAAG,MAAM;IACrB,IAAIC,MAAM,GAAG,EAAE;IACf,IAAIT,UAAU,GAAG,IAAI,CAACA,UAAU;IAChC,IAAIC,SAAS,GAAG,IAAI,CAACA,SAAS;IAC9B,KAAK,IAAIS,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGP,MAAM,CAACQ,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;MACzC,IAAIE,KAAK,GAAGT,MAAM,CAACO,CAAC,CAAC;MACrB,IAAIV,UAAU,KAAK,CAAC,EAAE;QACpB,IAAIY,KAAK,GAAG,GAAG,IAAIA,KAAK,GAAG,GAAG,IAAI,CAACR,KAAK,CAACH,SAAS,IAAI,CAAC,GAAGW,KAAK,GAAG,EAAE,EAAEZ,UAAU,GAAG,CAAC,EAAEM,WAAW,CAACN,UAAU,EAAEC,SAAS,CAAC,CAAC,EAAE;UACzHD,UAAU,GAAG,CAAC;UACdC,SAAS,GAAGO,QAAQ;UACpBC,MAAM,IAAII,MAAM,CAACC,YAAY,CAACb,SAAS,CAAC;QAC1C;MACF;MACA,IAAID,UAAU,KAAK,CAAC,EAAE;QACpB,IAAIY,KAAK,IAAI,CAAC,IAAIA,KAAK,IAAI,GAAG,EAAE;UAC9BZ,UAAU,GAAG,CAAC;UACdC,SAAS,GAAGW,KAAK;QACnB,CAAC,MAAM,IAAIA,KAAK,IAAI,GAAG,IAAIA,KAAK,IAAI,GAAG,EAAE;UACvCZ,UAAU,GAAG,CAAC,GAAG,CAAC;UAClBC,SAAS,GAAGW,KAAK,GAAG,EAAE;QACxB,CAAC,MAAM,IAAIA,KAAK,IAAI,GAAG,IAAIA,KAAK,IAAI,GAAG,EAAE;UACvCZ,UAAU,GAAG,CAAC,GAAG,CAAC;UAClBC,SAAS,GAAGW,KAAK,GAAG,EAAE;QACxB,CAAC,MAAM,IAAIA,KAAK,IAAI,GAAG,IAAIA,KAAK,IAAI,GAAG,EAAE;UACvCZ,UAAU,GAAG,CAAC,GAAG,CAAC;UAClBC,SAAS,GAAGW,KAAK,GAAG,CAAC;QACvB,CAAC,MAAM;UACLZ,UAAU,GAAG,CAAC;UACdC,SAAS,GAAGO,QAAQ;QACtB;QACA,IAAIR,UAAU,KAAK,CAAC,IAAI,CAACI,KAAK,CAACH,SAAS,EAAED,UAAU,EAAEM,WAAW,CAACN,UAAU,EAAEC,SAAS,CAAC,CAAC,EAAE;UACzFD,UAAU,GAAG,CAAC;UACdC,SAAS,GAAGO,QAAQ;QACtB;MACF,CAAC,MAAM;QACLR,UAAU,IAAI,CAAC;QACfC,SAAS,GAAGA,SAAS,IAAI,CAAC,GAAGW,KAAK,GAAG,EAAE;MACzC;MACA,IAAIZ,UAAU,KAAK,CAAC,EAAE;QACpB,IAAIC,SAAS,IAAI,MAAM,EAAE;UACvBQ,MAAM,IAAII,MAAM,CAACC,YAAY,CAACb,SAAS,CAAC;QAC1C,CAAC,MAAM;UACLQ,MAAM,IAAII,MAAM,CAACC,YAAY,CAAC,MAAM,IAAIb,SAAS,GAAG,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC,CAAC;UACtEQ,MAAM,IAAII,MAAM,CAACC,YAAY,CAAC,MAAM,IAAIb,SAAS,GAAG,MAAM,GAAG,CAAC,GAAG,KAAK,CAAC,CAAC;QAC1E;MACF;IACF;IACA,IAAI,CAACD,UAAU,GAAGA,UAAU;IAC5B,IAAI,CAACC,SAAS,GAAGA,SAAS;IAC1B,OAAOQ,MAAM;EACf,CAAC;;EAED;EACA,IAAIM,oBAAoB,GAAG,SAAAA,CAAA,EAAY;IACrC,IAAI;MACF,OAAO,IAAIlD,WAAW,CAAC,CAAC,CAACqC,MAAM,CAAC,IAAIpC,WAAW,CAAC,CAAC,CAACkD,MAAM,CAAC,MAAM,CAAC,EAAE;QAACC,MAAM,EAAE;MAAI,CAAC,CAAC,KAAK,MAAM;IAC9F,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACC,KAAK,CAAC,yEAAyE,GAAGF,KAAK,CAAC;IAClG;IACA,OAAO,KAAK;EACd,CAAC;;EAED;EACA,IAAIrD,WAAW,IAAIU,SAAS,IAAIT,WAAW,IAAIS,SAAS,IAAI,CAACwC,oBAAoB,CAAC,CAAC,EAAE;IACnFlD,WAAW,GAAGkC,mBAAmB;EACnC;EAEA,IAAIsB,CAAC,GAAG,SAAAA,CAAA,EAAY,CACpB,CAAC;EAED,SAASC,UAAUA,CAACC,GAAG,EAAE;IACvB,IAAI,CAACC,eAAe,GAAG,KAAK;IAC5B,IAAI,CAACtD,UAAU,GAAG,CAAC;IACnB,IAAI,CAAC0B,MAAM,GAAG,CAAC;IACf,IAAI,CAACC,UAAU,GAAG,EAAE;IACpB,IAAI,CAAC4B,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,UAAU,GAAGL,CAAC;IACnB,IAAI,CAACM,MAAM,GAAGN,CAAC;IACf,IAAI,CAACO,OAAO,GAAGP,CAAC;IAChB,IAAI,CAACQ,kBAAkB,GAAGR,CAAC;IAC3B,IAAI,CAACS,YAAY,GAAG,EAAE;IACtB,IAAI,CAACC,IAAI,GAAGR,GAAG;IACf,IAAI,CAACS,YAAY,GAAG,CAAC;IACrB,IAAI,CAACC,MAAM,GAAGZ,CAAC;EACjB;EAEAC,UAAU,CAAC5C,SAAS,CAACwD,IAAI,GAAG,UAAUC,MAAM,EAAEpD,GAAG,EAAE;IACjD,IAAI,CAACkD,MAAM,CAAC,IAAI,CAAC;IAEjB,IAAIG,IAAI,GAAG,IAAI;IACf,IAAIb,GAAG,GAAG,IAAI,CAACQ,IAAI;IACnB,IAAIM,KAAK,GAAG,CAAC;IACb,IAAIC,OAAO,GAAG,CAAC;IAEf,IAAI,CAACL,MAAM,GAAG,UAAUM,MAAM,EAAE;MAC9B,IAAIH,IAAI,CAACJ,YAAY,KAAK,CAAC,EAAE;QAC3B7E,YAAY,CAACiF,IAAI,CAACJ,YAAY,CAAC;QAC/BI,IAAI,CAACJ,YAAY,GAAG,CAAC;MACvB;MACA,IAAIK,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,EAAE;QAC7CA,KAAK,GAAG,CAAC;QACTd,GAAG,CAACI,MAAM,GAAGN,CAAC;QACdE,GAAG,CAACK,OAAO,GAAGP,CAAC;QACfE,GAAG,CAACiB,OAAO,GAAGnB,CAAC;QACfE,GAAG,CAACG,UAAU,GAAGL,CAAC;QAClBE,GAAG,CAACM,kBAAkB,GAAGR,CAAC;QAC1B;QACA;QACAE,GAAG,CAACzB,KAAK,CAAC,CAAC;QACX,IAAIwC,OAAO,KAAK,CAAC,EAAE;UACjBnF,YAAY,CAACmF,OAAO,CAAC;UACrBA,OAAO,GAAG,CAAC;QACb;QACA,IAAI,CAACC,MAAM,EAAE;UACXH,IAAI,CAAClE,UAAU,GAAG,CAAC;UACnBkE,IAAI,CAACI,OAAO,CAAC,IAAI,CAAC;UAClBJ,IAAI,CAACP,kBAAkB,CAAC,CAAC;QAC3B;MACF;MACAQ,KAAK,GAAG,CAAC;IACX,CAAC;IAED,IAAII,OAAO,GAAG,SAAAA,CAAA,EAAY;MACxB,IAAIJ,KAAK,KAAK,CAAC,EAAE;QACf;QACA,IAAIzC,MAAM,GAAG,CAAC;QACd,IAAIC,UAAU,GAAG,EAAE;QACnB,IAAI6C,WAAW,GAAGnE,SAAS;QAC3B,IAAI,EAAE,aAAa,IAAIgD,GAAG,CAAC,EAAE;UAC3B,IAAI;YACF3B,MAAM,GAAG2B,GAAG,CAAC3B,MAAM;YACnBC,UAAU,GAAG0B,GAAG,CAAC1B,UAAU;YAC3B6C,WAAW,GAAGnB,GAAG,CAACoB,iBAAiB,CAAC,cAAc,CAAC;UACrD,CAAC,CAAC,OAAOzB,KAAK,EAAE;YACd;YACA;YACA;YACAtB,MAAM,GAAG,CAAC;YACVC,UAAU,GAAG,EAAE;YACf6C,WAAW,GAAGnE,SAAS;YACvB;YACA;YACA;UACF;QACF,CAAC,MAAM;UACLqB,MAAM,GAAG,GAAG;UACZC,UAAU,GAAG,IAAI;UACjB6C,WAAW,GAAGnB,GAAG,CAACmB,WAAW;QAC/B;QACA,IAAI9C,MAAM,KAAK,CAAC,EAAE;UAChByC,KAAK,GAAG,CAAC;UACTD,IAAI,CAAClE,UAAU,GAAG,CAAC;UACnBkE,IAAI,CAACxC,MAAM,GAAGA,MAAM;UACpBwC,IAAI,CAACvC,UAAU,GAAGA,UAAU;UAC5BuC,IAAI,CAACN,YAAY,GAAGY,WAAW;UAC/BN,IAAI,CAACP,kBAAkB,CAAC,CAAC;QAC3B;MACF;IACF,CAAC;IACD,IAAIe,UAAU,GAAG,SAAAA,CAAA,EAAY;MAC3BH,OAAO,CAAC,CAAC;MACT,IAAIJ,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,EAAE;QAC9BA,KAAK,GAAG,CAAC;QACT,IAAIZ,YAAY,GAAG,EAAE;QACrB,IAAI;UACFA,YAAY,GAAGF,GAAG,CAACE,YAAY;QACjC,CAAC,CAAC,OAAOP,KAAK,EAAE;UACd;QAAA;QAEFkB,IAAI,CAAClE,UAAU,GAAG,CAAC;QACnBkE,IAAI,CAACX,YAAY,GAAGA,YAAY;QAChCW,IAAI,CAACV,UAAU,CAAC,CAAC;MACnB;IACF,CAAC;IACD,IAAImB,QAAQ,GAAG,SAAAA,CAAUC,IAAI,EAAE1E,KAAK,EAAE;MACpC,IAAIA,KAAK,IAAI,IAAI,IAAIA,KAAK,CAAC2E,cAAc,IAAI,IAAI,EAAE;QACjD3E,KAAK,GAAG;UACN2E,cAAc,EAAE1B;QAClB,CAAC;MACH;MACA;MACA;MACAuB,UAAU,CAAC,CAAC;MACZ,IAAIP,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,IAAIA,KAAK,KAAK,CAAC,EAAE;QAC7CA,KAAK,GAAG,CAAC;QACT,IAAIC,OAAO,KAAK,CAAC,EAAE;UACjBnF,YAAY,CAACmF,OAAO,CAAC;UACrBA,OAAO,GAAG,CAAC;QACb;QACAF,IAAI,CAAClE,UAAU,GAAG,CAAC;QACnB,IAAI4E,IAAI,KAAK,MAAM,EAAE;UACnBV,IAAI,CAACT,MAAM,CAACvD,KAAK,CAAC;QACpB,CAAC,MAAM,IAAI0E,IAAI,KAAK,OAAO,EAAE;UAC3BV,IAAI,CAACR,OAAO,CAACxD,KAAK,CAAC;QACrB,CAAC,MAAM,IAAI0E,IAAI,KAAK,OAAO,EAAE;UAC3BV,IAAI,CAACI,OAAO,CAACpE,KAAK,CAAC;QACrB,CAAC,MAAM;UACL,MAAM,IAAI4E,SAAS,CAAC,CAAC;QACvB;QACAZ,IAAI,CAACP,kBAAkB,CAAC,CAAC;MAC3B;IACF,CAAC;IACD,IAAIoB,kBAAkB,GAAG,SAAAA,CAAU7E,KAAK,EAAE;MACxC,IAAImD,GAAG,IAAIhD,SAAS,EAAE;QAAE;QACtB,IAAIgD,GAAG,CAACrD,UAAU,KAAK,CAAC,EAAE;UACxB,IAAI,EAAE,QAAQ,IAAIqD,GAAG,CAAC,IAAI,EAAE,SAAS,IAAIA,GAAG,CAAC,IAAI,EAAE,SAAS,IAAIA,GAAG,CAAC,EAAE;YACpEsB,QAAQ,CAACtB,GAAG,CAACE,YAAY,KAAK,EAAE,GAAG,OAAO,GAAG,MAAM,EAAErD,KAAK,CAAC;UAC7D;QACF,CAAC,MAAM,IAAImD,GAAG,CAACrD,UAAU,KAAK,CAAC,EAAE;UAC/B,IAAI,EAAE,YAAY,IAAIqD,GAAG,CAAC,EAAE;YAAE;YAC5B;YACAqB,UAAU,CAAC,CAAC;UACd;QACF,CAAC,MAAM,IAAIrB,GAAG,CAACrD,UAAU,KAAK,CAAC,EAAE;UAC/BuE,OAAO,CAAC,CAAC;QACX;MACF;IACF,CAAC;IACD,IAAIS,SAAS,GAAG,SAAAA,CAAA,EAAY;MAC1BZ,OAAO,GAAGpF,UAAU,CAAC,YAAY;QAC/BgG,SAAS,CAAC,CAAC;MACb,CAAC,EAAE,GAAG,CAAC;MACP,IAAI3B,GAAG,CAACrD,UAAU,KAAK,CAAC,EAAE;QACxB0E,UAAU,CAAC,CAAC;MACd;IACF,CAAC;;IAED;IACA,IAAI,QAAQ,IAAIrB,GAAG,EAAE;MACnBA,GAAG,CAACI,MAAM,GAAG,UAAUvD,KAAK,EAAE;QAC5ByE,QAAQ,CAAC,MAAM,EAAEzE,KAAK,CAAC;MACzB,CAAC;IACH;IACA,IAAI,SAAS,IAAImD,GAAG,EAAE;MACpBA,GAAG,CAACK,OAAO,GAAG,UAAUxD,KAAK,EAAE;QAC7ByE,QAAQ,CAAC,OAAO,EAAEzE,KAAK,CAAC;MAC1B,CAAC;IACH;IACA;IACA;IACA;IACA;IACA;IACA,IAAI,SAAS,IAAImD,GAAG,EAAE;MACpBA,GAAG,CAACiB,OAAO,GAAG,UAAUpE,KAAK,EAAE;QAC7ByE,QAAQ,CAAC,OAAO,EAAEzE,KAAK,CAAC;MAC1B,CAAC;IACH;IAEA,IAAI,YAAY,IAAImD,GAAG,EAAE;MACvBA,GAAG,CAACG,UAAU,GAAGkB,UAAU;IAC7B;;IAEA;IACA;IACA;IACA;IACA;IACA;IACA,IAAI,oBAAoB,IAAIrB,GAAG,EAAE;MAC/BA,GAAG,CAACM,kBAAkB,GAAG,UAAUzD,KAAK,EAAE;QACxC6E,kBAAkB,CAAC7E,KAAK,CAAC;MAC3B,CAAC;IACH;IAEA,IAAI,aAAa,IAAImD,GAAG,IAAI,EAAE,WAAW,IAAInE,cAAc,CAACsB,SAAS,CAAC,EAAE;MACtEK,GAAG,IAAI,CAACA,GAAG,CAACoE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI,cAAc;IAC/D;IACA5B,GAAG,CAACW,IAAI,CAACC,MAAM,EAAEpD,GAAG,EAAE,IAAI,CAAC;IAE3B,IAAI,YAAY,IAAIwC,GAAG,EAAE;MACvB;MACA;MACAe,OAAO,GAAGpF,UAAU,CAAC,YAAY;QAC/BgG,SAAS,CAAC,CAAC;MACb,CAAC,EAAE,CAAC,CAAC;IACP;EACF,CAAC;EACD5B,UAAU,CAAC5C,SAAS,CAACoB,KAAK,GAAG,YAAY;IACvC,IAAI,CAACmC,MAAM,CAAC,KAAK,CAAC;EACpB,CAAC;EACDX,UAAU,CAAC5C,SAAS,CAACiE,iBAAiB,GAAG,UAAUS,IAAI,EAAE;IACvD,OAAO,IAAI,CAACtB,YAAY;EAC1B,CAAC;EACDR,UAAU,CAAC5C,SAAS,CAAC2E,gBAAgB,GAAG,UAAUD,IAAI,EAAEE,KAAK,EAAE;IAC7D,IAAI/B,GAAG,GAAG,IAAI,CAACQ,IAAI;IACnB,IAAI,kBAAkB,IAAIR,GAAG,EAAE;MAC7BA,GAAG,CAAC8B,gBAAgB,CAACD,IAAI,EAAEE,KAAK,CAAC;IACnC;EACF,CAAC;EACDhC,UAAU,CAAC5C,SAAS,CAAC6E,qBAAqB,GAAG,YAAY;IACvD;IACA,OAAO,IAAI,CAACxB,IAAI,CAACwB,qBAAqB,IAAIhF,SAAS,GAAG,IAAI,CAACwD,IAAI,CAACwB,qBAAqB,CAAC,CAAC,IAAI,EAAE,GAAG,EAAE;EACpG,CAAC;EACDjC,UAAU,CAAC5C,SAAS,CAAC8E,IAAI,GAAG,YAAY;IACtC;IACA;IACA,IAAI,CAAC,EAAE,WAAW,IAAIpG,cAAc,CAACsB,SAAS,CAAC,IAAK,EAAE,cAAc,IAAItB,cAAc,CAACsB,SAAS,CAAC,IAAI,EAAE,SAAS,IAAItB,cAAc,CAACsB,SAAS,CAAE,KAC1IjB,QAAQ,IAAIc,SAAS,IACrBd,QAAQ,CAACS,UAAU,IAAIK,SAAS,IAChCd,QAAQ,CAACS,UAAU,KAAK,UAAU,EAAE;MACtC,IAAIkE,IAAI,GAAG,IAAI;MACfA,IAAI,CAACJ,YAAY,GAAG9E,UAAU,CAAC,YAAY;QACzCkF,IAAI,CAACJ,YAAY,GAAG,CAAC;QACrBI,IAAI,CAACoB,IAAI,CAAC,CAAC;MACb,CAAC,EAAE,CAAC,CAAC;MACL;IACF;IAEA,IAAIjC,GAAG,GAAG,IAAI,CAACQ,IAAI;IACnB;IACA,IAAI,iBAAiB,IAAIR,GAAG,EAAE;MAC5BA,GAAG,CAACC,eAAe,GAAG,IAAI,CAACA,eAAe;IAC5C;IACA,IAAI;MACF;MACAD,GAAG,CAACiC,IAAI,CAACjF,SAAS,CAAC;IACrB,CAAC,CAAC,OAAOkF,MAAM,EAAE;MACf;MACA,MAAMA,MAAM;IACd;EACF,CAAC;EAED,SAASC,WAAWA,CAACN,IAAI,EAAE;IACzB,OAAOA,IAAI,CAACO,OAAO,CAAC,QAAQ,EAAE,UAAUC,CAAC,EAAE;MACzC,OAAO/C,MAAM,CAACC,YAAY,CAAC8C,CAAC,CAACC,UAAU,CAAC,CAAC,CAAC,GAAG,IAAI,CAAC;IACpD,CAAC,CAAC;EACJ;EAEA,SAASC,eAAeA,CAACC,GAAG,EAAE;IAC5B;IACA,IAAIC,GAAG,GAAG3F,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;IAC7B,IAAI2F,KAAK,GAAGF,GAAG,CAACG,KAAK,CAAC,MAAM,CAAC;IAC7B,KAAK,IAAIxD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuD,KAAK,CAACtD,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;MACxC,IAAIyD,IAAI,GAAGF,KAAK,CAACvD,CAAC,CAAC;MACnB,IAAI0D,KAAK,GAAGD,IAAI,CAACD,KAAK,CAAC,IAAI,CAAC;MAC5B,IAAId,IAAI,GAAGgB,KAAK,CAAC/D,KAAK,CAAC,CAAC;MACxB,IAAIiD,KAAK,GAAGc,KAAK,CAACC,IAAI,CAAC,IAAI,CAAC;MAC5BL,GAAG,CAACN,WAAW,CAACN,IAAI,CAAC,CAAC,GAAGE,KAAK;IAChC;IACA,IAAI,CAACgB,IAAI,GAAGN,GAAG;EACjB;EACAF,eAAe,CAACpF,SAAS,CAAC6F,GAAG,GAAG,UAAUnB,IAAI,EAAE;IAC9C,OAAO,IAAI,CAACkB,IAAI,CAACZ,WAAW,CAACN,IAAI,CAAC,CAAC;EACrC,CAAC;EAED,IAAIhG,cAAc,IAAI,IAAI,IAAIA,cAAc,CAACoH,gBAAgB,IAAI,IAAI,EAAE;IAAE;IACvEpH,cAAc,CAACoH,gBAAgB,GAAG,CAAC;EACrC;EAEA,SAASC,YAAYA,CAAA,EAAG,CACxB;EAEAA,YAAY,CAAC/F,SAAS,CAACwD,IAAI,GAAG,UAAUX,GAAG,EAAEmD,eAAe,EAAEC,kBAAkB,EAAEC,gBAAgB,EAAE7F,GAAG,EAAEyC,eAAe,EAAEtC,OAAO,EAAE;IACjIqC,GAAG,CAACW,IAAI,CAAC,KAAK,EAAEnD,GAAG,CAAC;IACpB,IAAI8F,MAAM,GAAG,CAAC;IACdtD,GAAG,CAACG,UAAU,GAAG,YAAY;MAC3B,IAAID,YAAY,GAAGF,GAAG,CAACE,YAAY;MACnC,IAAIqD,KAAK,GAAGrD,YAAY,CAACsD,KAAK,CAACF,MAAM,CAAC;MACtCA,MAAM,IAAIC,KAAK,CAACnE,MAAM;MACtBgE,kBAAkB,CAACG,KAAK,CAAC;IAC3B,CAAC;IACDvD,GAAG,CAACK,OAAO,GAAG,UAAUxD,KAAK,EAAE;MAC7BA,KAAK,CAAC2E,cAAc,CAAC,CAAC;MACtB6B,gBAAgB,CAAC,IAAIrE,KAAK,CAAC,cAAc,CAAC,CAAC;IAC7C,CAAC;IACDgB,GAAG,CAACI,MAAM,GAAG,YAAY;MACvBiD,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC;IACDrD,GAAG,CAACiB,OAAO,GAAG,YAAY;MACxBoC,gBAAgB,CAAC,IAAI,CAAC;IACxB,CAAC;IACDrD,GAAG,CAACM,kBAAkB,GAAG,YAAY;MACnC,IAAIN,GAAG,CAACrD,UAAU,KAAKd,cAAc,CAACoH,gBAAgB,EAAE;QACtD,IAAI5E,MAAM,GAAG2B,GAAG,CAAC3B,MAAM;QACvB,IAAIC,UAAU,GAAG0B,GAAG,CAAC1B,UAAU;QAC/B,IAAI6C,WAAW,GAAGnB,GAAG,CAACoB,iBAAiB,CAAC,cAAc,CAAC;QACvD,IAAIzD,OAAO,GAAGqC,GAAG,CAACgC,qBAAqB,CAAC,CAAC;QACzCmB,eAAe,CAAC9E,MAAM,EAAEC,UAAU,EAAE6C,WAAW,EAAE,IAAIoB,eAAe,CAAC5E,OAAO,CAAC,CAAC;MAChF;IACF,CAAC;IACDqC,GAAG,CAACC,eAAe,GAAGA,eAAe;IACrC,KAAK,IAAI4B,IAAI,IAAIlE,OAAO,EAAE;MACxB,IAAIb,MAAM,CAACK,SAAS,CAACsG,cAAc,CAACC,IAAI,CAAC/F,OAAO,EAAEkE,IAAI,CAAC,EAAE;QACvD7B,GAAG,CAAC8B,gBAAgB,CAACD,IAAI,EAAElE,OAAO,CAACkE,IAAI,CAAC,CAAC;MAC3C;IACF;IACA7B,GAAG,CAACiC,IAAI,CAAC,CAAC;IACV,OAAOjC,GAAG;EACZ,CAAC;EAED,SAAS2D,cAAcA,CAAChG,OAAO,EAAE;IAC/B,IAAI,CAACiG,QAAQ,GAAGjG,OAAO;EACzB;EACAgG,cAAc,CAACxG,SAAS,CAAC6F,GAAG,GAAG,UAAUnB,IAAI,EAAE;IAC7C,OAAO,IAAI,CAAC+B,QAAQ,CAACZ,GAAG,CAACnB,IAAI,CAAC;EAChC,CAAC;EAED,SAASgC,cAAcA,CAAA,EAAG,CAC1B;EAEAA,cAAc,CAAC1G,SAAS,CAACwD,IAAI,GAAG,UAAUX,GAAG,EAAEmD,eAAe,EAAEC,kBAAkB,EAAEC,gBAAgB,EAAE7F,GAAG,EAAEyC,eAAe,EAAEtC,OAAO,EAAE;IACnI,IAAIK,MAAM,GAAG,IAAI;IACjB,IAAI8F,UAAU,GAAG,IAAItH,eAAe,CAAC,CAAC;IACtC,IAAIkB,MAAM,GAAGoG,UAAU,CAACpG,MAAM;IAC9B,IAAIqG,WAAW,GAAG,IAAIzH,WAAW,CAAC,CAAC;IACnCF,KAAK,CAACoB,GAAG,EAAE;MACTG,OAAO,EAAEA,OAAO;MAChBC,WAAW,EAAEqC,eAAe,GAAG,SAAS,GAAG,aAAa;MACxDvC,MAAM,EAAEA,MAAM;MACdG,KAAK,EAAE;IACT,CAAC,CAAC,CAACC,IAAI,CAAC,UAAUC,QAAQ,EAAE;MAC1BC,MAAM,GAAGD,QAAQ,CAACrB,IAAI,CAACuB,SAAS,CAAC,CAAC;MAClCkF,eAAe,CAACpF,QAAQ,CAACM,MAAM,EAAEN,QAAQ,CAACO,UAAU,EAAEP,QAAQ,CAACJ,OAAO,CAACqF,GAAG,CAAC,cAAc,CAAC,EAAE,IAAIW,cAAc,CAAC5F,QAAQ,CAACJ,OAAO,CAAC,CAAC;MACjI;MACA,OAAO,IAAIxB,OAAO,CAAC,UAAU6H,OAAO,EAAEC,MAAM,EAAE;QAC5C,IAAIC,aAAa,GAAG,SAAAA,CAAA,EAAY;UAC9BlG,MAAM,CAACmG,IAAI,CAAC,CAAC,CAACrG,IAAI,CAAC,UAAUsG,MAAM,EAAE;YACnC,IAAIA,MAAM,CAACC,IAAI,EAAE;cACf;cACAL,OAAO,CAAChH,SAAS,CAAC;YACpB,CAAC,MAAM;cACL,IAAIuG,KAAK,GAAGQ,WAAW,CAACpF,MAAM,CAACyF,MAAM,CAACrC,KAAK,EAAE;gBAACrC,MAAM,EAAE;cAAI,CAAC,CAAC;cAC5D0D,kBAAkB,CAACG,KAAK,CAAC;cACzBW,aAAa,CAAC,CAAC;YACjB;UACF,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAUvE,KAAK,EAAE;YAC3BsE,MAAM,CAACtE,KAAK,CAAC;UACf,CAAC,CAAC;QACJ,CAAC;QACDuE,aAAa,CAAC,CAAC;MACjB,CAAC,CAAC;IACJ,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,UAAUvE,KAAK,EAAE;MAC3B,IAAIA,KAAK,CAACkC,IAAI,KAAK,YAAY,EAAE;QAC/B,OAAO7E,SAAS;MAClB,CAAC,MAAM;QACL,OAAO2C,KAAK;MACd;IACF,CAAC,CAAC,CAAC7B,IAAI,CAAC,UAAU6B,KAAK,EAAE;MACvB0D,gBAAgB,CAAC1D,KAAK,CAAC;IACzB,CAAC,CAAC;IACF,OAAO;MACLpB,KAAK,EAAE,SAAAA,CAAA,EAAY;QACjB,IAAIP,MAAM,IAAI,IAAI,EAAE;UAClBA,MAAM,CAACI,MAAM,CAAC,CAAC,CAAC,CAAC;QACnB;QACA0F,UAAU,CAACvF,KAAK,CAAC,CAAC;MACpB;IACF,CAAC;EACH,CAAC;EAED,SAAS+F,WAAWA,CAAA,EAAG;IACrB,IAAI,CAACC,UAAU,GAAGzH,MAAM,CAACC,MAAM,CAAC,IAAI,CAAC;EACvC;EAEA,SAASyH,UAAUA,CAACC,CAAC,EAAE;IACrB9I,UAAU,CAAC,YAAY;MACrB,MAAM8I,CAAC;IACT,CAAC,EAAE,CAAC,CAAC;EACP;EAEAH,WAAW,CAACnH,SAAS,CAACuH,aAAa,GAAG,UAAU7H,KAAK,EAAE;IACrDA,KAAK,CAAC8H,MAAM,GAAG,IAAI;IACnB,IAAIC,aAAa,GAAG,IAAI,CAACL,UAAU,CAAC1H,KAAK,CAAC0E,IAAI,CAAC;IAC/C,IAAIqD,aAAa,IAAI5H,SAAS,EAAE;MAC9B,IAAIoC,MAAM,GAAGwF,aAAa,CAACxF,MAAM;MACjC,KAAK,IAAID,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGC,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAClC,IAAI0F,QAAQ,GAAGD,aAAa,CAACzF,CAAC,CAAC;QAC/B,IAAI;UACF,IAAI,OAAO0F,QAAQ,CAACC,WAAW,KAAK,UAAU,EAAE;YAC9CD,QAAQ,CAACC,WAAW,CAACjI,KAAK,CAAC;UAC7B,CAAC,MAAM;YACLgI,QAAQ,CAACnB,IAAI,CAAC,IAAI,EAAE7G,KAAK,CAAC;UAC5B;QACF,CAAC,CAAC,OAAO4H,CAAC,EAAE;UACVD,UAAU,CAACC,CAAC,CAAC;QACf;MACF;IACF;EACF,CAAC;EACDH,WAAW,CAACnH,SAAS,CAACP,gBAAgB,GAAG,UAAU2E,IAAI,EAAEsD,QAAQ,EAAE;IACjEtD,IAAI,GAAGjC,MAAM,CAACiC,IAAI,CAAC;IACnB,IAAIwD,SAAS,GAAG,IAAI,CAACR,UAAU;IAC/B,IAAIK,aAAa,GAAGG,SAAS,CAACxD,IAAI,CAAC;IACnC,IAAIqD,aAAa,IAAI5H,SAAS,EAAE;MAC9B4H,aAAa,GAAG,EAAE;MAClBG,SAAS,CAACxD,IAAI,CAAC,GAAGqD,aAAa;IACjC;IACA,IAAII,KAAK,GAAG,KAAK;IACjB,KAAK,IAAI7F,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyF,aAAa,CAACxF,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;MAChD,IAAIyF,aAAa,CAACzF,CAAC,CAAC,KAAK0F,QAAQ,EAAE;QACjCG,KAAK,GAAG,IAAI;MACd;IACF;IACA,IAAI,CAACA,KAAK,EAAE;MACVJ,aAAa,CAACK,IAAI,CAACJ,QAAQ,CAAC;IAC9B;EACF,CAAC;EACDP,WAAW,CAACnH,SAAS,CAAC+H,mBAAmB,GAAG,UAAU3D,IAAI,EAAEsD,QAAQ,EAAE;IACpEtD,IAAI,GAAGjC,MAAM,CAACiC,IAAI,CAAC;IACnB,IAAIwD,SAAS,GAAG,IAAI,CAACR,UAAU;IAC/B,IAAIK,aAAa,GAAGG,SAAS,CAACxD,IAAI,CAAC;IACnC,IAAIqD,aAAa,IAAI5H,SAAS,EAAE;MAC9B,IAAImI,QAAQ,GAAG,EAAE;MACjB,KAAK,IAAIhG,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGyF,aAAa,CAACxF,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;QAChD,IAAIyF,aAAa,CAACzF,CAAC,CAAC,KAAK0F,QAAQ,EAAE;UACjCM,QAAQ,CAACF,IAAI,CAACL,aAAa,CAACzF,CAAC,CAAC,CAAC;QACjC;MACF;MACA,IAAIgG,QAAQ,CAAC/F,MAAM,KAAK,CAAC,EAAE;QACzB,OAAO2F,SAAS,CAACxD,IAAI,CAAC;MACxB,CAAC,MAAM;QACLwD,SAAS,CAACxD,IAAI,CAAC,GAAG4D,QAAQ;MAC5B;IACF;EACF,CAAC;EAED,SAASC,KAAKA,CAAC7D,IAAI,EAAE;IACnB,IAAI,CAACA,IAAI,GAAGA,IAAI;IAChB,IAAI,CAACoD,MAAM,GAAG3H,SAAS;EACzB;EAEA,SAASqI,YAAYA,CAAC9D,IAAI,EAAE9D,OAAO,EAAE;IACnC2H,KAAK,CAAC1B,IAAI,CAAC,IAAI,EAAEnC,IAAI,CAAC;IACtB,IAAI,CAAC+D,IAAI,GAAG7H,OAAO,CAAC6H,IAAI;IACxB,IAAI,CAACC,WAAW,GAAG9H,OAAO,CAAC8H,WAAW;EACxC;EAEAF,YAAY,CAAClI,SAAS,GAAGL,MAAM,CAACC,MAAM,CAACqI,KAAK,CAACjI,SAAS,CAAC;EAEvD,SAASqI,eAAeA,CAACjE,IAAI,EAAE9D,OAAO,EAAE;IACtC2H,KAAK,CAAC1B,IAAI,CAAC,IAAI,EAAEnC,IAAI,CAAC;IACtB,IAAI,CAAClD,MAAM,GAAGZ,OAAO,CAACY,MAAM;IAC5B,IAAI,CAACC,UAAU,GAAGb,OAAO,CAACa,UAAU;IACpC,IAAI,CAACX,OAAO,GAAGF,OAAO,CAACE,OAAO;EAChC;EAEA6H,eAAe,CAACrI,SAAS,GAAGL,MAAM,CAACC,MAAM,CAACqI,KAAK,CAACjI,SAAS,CAAC;EAE1D,SAASsI,UAAUA,CAAClE,IAAI,EAAE9D,OAAO,EAAE;IACjC2H,KAAK,CAAC1B,IAAI,CAAC,IAAI,EAAEnC,IAAI,CAAC;IACtB,IAAI,CAAC5B,KAAK,GAAGlC,OAAO,CAACkC,KAAK;EAC5B;EAEA8F,UAAU,CAACtI,SAAS,GAAGL,MAAM,CAACC,MAAM,CAACqI,KAAK,CAACjI,SAAS,CAAC;EAErD,IAAIuI,OAAO,GAAG,CAAC,CAAC;EAChB,IAAIC,UAAU,GAAG,CAAC;EAClB,IAAIC,IAAI,GAAG,CAAC;EACZ,IAAIC,MAAM,GAAG,CAAC;EAEd,IAAIC,QAAQ,GAAG,CAAC,CAAC;EACjB,IAAIC,WAAW,GAAG,CAAC;EACnB,IAAIC,KAAK,GAAG,CAAC;EACb,IAAIC,WAAW,GAAG,CAAC;EACnB,IAAIC,KAAK,GAAG,CAAC;EAEb,IAAIC,iBAAiB,GAAG,8BAA8B;EAEtD,IAAIC,gBAAgB,GAAG,IAAI;EAC3B,IAAIC,gBAAgB,GAAG,QAAQ;EAE/B,IAAIC,aAAa,GAAG,SAAAA,CAAUvE,KAAK,EAAEwE,GAAG,EAAE;IACxC,IAAIC,CAAC,GAAGzE,KAAK,IAAI,IAAI,GAAGwE,GAAG,GAAGE,QAAQ,CAAC1E,KAAK,EAAE,EAAE,CAAC;IACjD,IAAIyE,CAAC,KAAKA,CAAC,EAAE;MACXA,CAAC,GAAGD,GAAG;IACT;IACA,OAAOG,aAAa,CAACF,CAAC,CAAC;EACzB,CAAC;EACD,IAAIE,aAAa,GAAG,SAAAA,CAAUF,CAAC,EAAE;IAC/B,OAAOG,IAAI,CAACC,GAAG,CAACD,IAAI,CAACE,GAAG,CAACL,CAAC,EAAEJ,gBAAgB,CAAC,EAAEC,gBAAgB,CAAC;EAClE,CAAC;EAED,IAAIS,IAAI,GAAG,SAAAA,CAAUjG,IAAI,EAAEkG,CAAC,EAAElK,KAAK,EAAE;IACnC,IAAI;MACF,IAAI,OAAOkK,CAAC,KAAK,UAAU,EAAE;QAC3BA,CAAC,CAACrD,IAAI,CAAC7C,IAAI,EAAEhE,KAAK,CAAC;MACrB;IACF,CAAC,CAAC,OAAO4H,CAAC,EAAE;MACVD,UAAU,CAACC,CAAC,CAAC;IACf;EACF,CAAC;EAED,SAASuC,mBAAmBA,CAACxJ,GAAG,EAAEC,OAAO,EAAE;IACzC6G,WAAW,CAACZ,IAAI,CAAC,IAAI,CAAC;IACtBjG,OAAO,GAAGA,OAAO,IAAI,CAAC,CAAC;IAEvB,IAAI,CAACwJ,MAAM,GAAGjK,SAAS;IACvB,IAAI,CAACkK,SAAS,GAAGlK,SAAS;IAC1B,IAAI,CAACqD,OAAO,GAAGrD,SAAS;IAExB,IAAI,CAACQ,GAAG,GAAGR,SAAS;IACpB,IAAI,CAACL,UAAU,GAAGK,SAAS;IAC3B,IAAI,CAACiD,eAAe,GAAGjD,SAAS;IAChC,IAAI,CAACW,OAAO,GAAGX,SAAS;IAExB,IAAI,CAACmK,MAAM,GAAGnK,SAAS;IAEvBoK,KAAK,CAAC,IAAI,EAAE5J,GAAG,EAAEC,OAAO,CAAC;EAC3B;EAEA,SAAS4J,mBAAmBA,CAAA,EAAG;IAC7B,OAAQxL,cAAc,IAAImB,SAAS,IAAK,iBAAiB,IAAInB,cAAc,CAACsB,SAAU,IAAKrB,cAAc,IAAIkB,SAAS,GAChH,IAAInB,cAAc,CAAC,CAAC,GACpB,IAAIC,cAAc,CAAC,CAAC;EAC5B;EAEA,IAAIwL,gBAAgB,GAAGlL,KAAK,IAAIY,SAAS,IAAIX,QAAQ,IAAIW,SAAS,IAAI,MAAM,IAAIX,QAAQ,CAACc,SAAS;EAElG,SAASiK,KAAKA,CAACG,EAAE,EAAE/J,GAAG,EAAEC,OAAO,EAAE;IAC/BD,GAAG,GAAG8B,MAAM,CAAC9B,GAAG,CAAC;IACjB,IAAIyC,eAAe,GAAGuH,OAAO,CAAC/J,OAAO,CAACwC,eAAe,CAAC;IACtD,IAAIwH,6BAA6B,GAAGhK,OAAO,CAACgK,6BAA6B,IAAI,aAAa;IAE1F,IAAIC,YAAY,GAAGhB,aAAa,CAAC,IAAI,CAAC;IACtC,IAAIiB,gBAAgB,GAAGrB,aAAa,CAAC7I,OAAO,CAACkK,gBAAgB,EAAE,KAAK,CAAC;IAErE,IAAIpC,WAAW,GAAG,EAAE;IACpB,IAAIqC,KAAK,GAAGF,YAAY;IACxB,IAAIG,WAAW,GAAG,KAAK;IACvB,IAAIC,UAAU,GAAG,CAAC;IAClB,IAAInK,OAAO,GAAGF,OAAO,CAACE,OAAO,IAAI,CAAC,CAAC;IACnC,IAAIoK,eAAe,GAAGtK,OAAO,CAACuK,SAAS;IACvC,IAAIhI,GAAG,GAAGsH,gBAAgB,IAAIS,eAAe,IAAI/K,SAAS,GAAGA,SAAS,GAAG,IAAI+C,UAAU,CAACgI,eAAe,IAAI/K,SAAS,GAAG,IAAI+K,eAAe,CAAC,CAAC,GAAGV,mBAAmB,CAAC,CAAC,CAAC;IACrK,IAAIY,SAAS,GAAGF,eAAe,IAAI,IAAI,IAAI,OAAOA,eAAe,KAAK,QAAQ,GAAG,IAAIA,eAAe,CAAC,CAAC,GAAI/H,GAAG,IAAIhD,SAAS,GAAG,IAAI6G,cAAc,CAAC,CAAC,GAAG,IAAIX,YAAY,CAAC,CAAE;IACvK,IAAIgF,eAAe,GAAGlL,SAAS;IAC/B,IAAI+D,OAAO,GAAG,CAAC;IACf,IAAIoH,YAAY,GAAGzC,OAAO;IAC1B,IAAI0C,UAAU,GAAG,EAAE;IACnB,IAAIC,iBAAiB,GAAG,EAAE;IAC1B,IAAIC,eAAe,GAAG,EAAE;IAExB,IAAIC,UAAU,GAAG,EAAE;IACnB,IAAIzH,KAAK,GAAGiF,WAAW;IACvB,IAAIyC,UAAU,GAAG,CAAC;IAClB,IAAIC,UAAU,GAAG,CAAC;IAElB,IAAIvH,OAAO,GAAG,SAAAA,CAAU7C,MAAM,EAAEC,UAAU,EAAE6C,WAAW,EAAExD,OAAO,EAAE;MAChE,IAAIwK,YAAY,KAAKxC,UAAU,EAAE;QAC/B,IAAItH,MAAM,KAAK,GAAG,IAAI8C,WAAW,IAAInE,SAAS,IAAImJ,iBAAiB,CAACuC,IAAI,CAACvH,WAAW,CAAC,EAAE;UACrFgH,YAAY,GAAGvC,IAAI;UACnBiC,WAAW,GAAGzK,IAAI,CAACC,GAAG,CAAC,CAAC;UACxBuK,KAAK,GAAGF,YAAY;UACpBH,EAAE,CAAC5K,UAAU,GAAGiJ,IAAI;UACpB,IAAI/I,KAAK,GAAG,IAAI2I,eAAe,CAAC,MAAM,EAAE;YACtCnH,MAAM,EAAEA,MAAM;YACdC,UAAU,EAAEA,UAAU;YACtBX,OAAO,EAAEA;UACX,CAAC,CAAC;UACF4J,EAAE,CAAC7C,aAAa,CAAC7H,KAAK,CAAC;UACvBiK,IAAI,CAACS,EAAE,EAAEA,EAAE,CAACN,MAAM,EAAEpK,KAAK,CAAC;QAC5B,CAAC,MAAM;UACL,IAAI8L,OAAO,GAAG,EAAE;UAChB,IAAItK,MAAM,KAAK,GAAG,EAAE;YAClB,IAAIC,UAAU,EAAE;cACdA,UAAU,GAAGA,UAAU,CAAC8D,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC;YAC9C;YACAuG,OAAO,GAAG,sCAAsC,GAAGtK,MAAM,GAAG,GAAG,GAAGC,UAAU,GAAG,4CAA4C;UAC7H,CAAC,MAAM;YACLqK,OAAO,GAAG,4EAA4E,IAAIxH,WAAW,IAAInE,SAAS,GAAG,GAAG,GAAGmE,WAAW,CAACiB,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,GAAG,4BAA4B;UAC7L;UACAwG,KAAK,CAAC,CAAC;UACP,IAAI/L,KAAK,GAAG,IAAI2I,eAAe,CAAC,OAAO,EAAE;YACvCnH,MAAM,EAAEA,MAAM;YACdC,UAAU,EAAEA,UAAU;YACtBX,OAAO,EAAEA;UACX,CAAC,CAAC;UACF4J,EAAE,CAAC7C,aAAa,CAAC7H,KAAK,CAAC;UACvBiK,IAAI,CAACS,EAAE,EAAEA,EAAE,CAAClH,OAAO,EAAExD,KAAK,CAAC;UAC3B+C,OAAO,CAACD,KAAK,CAACgJ,OAAO,CAAC;QACxB;MACF;IACF,CAAC;IAED,IAAItH,UAAU,GAAG,SAAAA,CAAUwH,SAAS,EAAE;MACpC,IAAIV,YAAY,KAAKvC,IAAI,EAAE;QACzB,IAAIY,CAAC,GAAG,CAAC,CAAC;QACV,KAAK,IAAIrH,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG0J,SAAS,CAACzJ,MAAM,EAAED,CAAC,IAAI,CAAC,EAAE;UAC5C,IAAIkD,CAAC,GAAGwG,SAAS,CAACvG,UAAU,CAACnD,CAAC,CAAC;UAC/B,IAAIkD,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,IAAID,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,EAAE;YACxDkE,CAAC,GAAGrH,CAAC;UACP;QACF;QACA,IAAIoE,KAAK,GAAG,CAACiD,CAAC,KAAK,CAAC,CAAC,GAAG+B,UAAU,GAAG,EAAE,IAAIM,SAAS,CAACrF,KAAK,CAAC,CAAC,EAAEgD,CAAC,GAAG,CAAC,CAAC;QACpE+B,UAAU,GAAG,CAAC/B,CAAC,KAAK,CAAC,CAAC,GAAG+B,UAAU,GAAG,EAAE,IAAIM,SAAS,CAACrF,KAAK,CAACgD,CAAC,GAAG,CAAC,CAAC;QAClE,IAAIqC,SAAS,KAAK,EAAE,EAAE;UACpBhB,WAAW,GAAGzK,IAAI,CAACC,GAAG,CAAC,CAAC;UACxByK,UAAU,IAAIe,SAAS,CAACzJ,MAAM;QAChC;QACA,KAAK,IAAI0J,QAAQ,GAAG,CAAC,EAAEA,QAAQ,GAAGvF,KAAK,CAACnE,MAAM,EAAE0J,QAAQ,IAAI,CAAC,EAAE;UAC7D,IAAIzG,CAAC,GAAGkB,KAAK,CAACjB,UAAU,CAACwG,QAAQ,CAAC;UAClC,IAAIhI,KAAK,KAAKgF,QAAQ,IAAIzD,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,EAAE;YAClDxB,KAAK,GAAGiF,WAAW;UACrB,CAAC,MAAM;YACL,IAAIjF,KAAK,KAAKgF,QAAQ,EAAE;cACtBhF,KAAK,GAAGiF,WAAW;YACrB;YACA,IAAI1D,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,IAAID,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,EAAE;cACxD,IAAIxB,KAAK,KAAKiF,WAAW,EAAE;gBACzB,IAAIjF,KAAK,KAAKkF,KAAK,EAAE;kBACnByC,UAAU,GAAGK,QAAQ,GAAG,CAAC;gBAC3B;gBACA,IAAIC,KAAK,GAAGxF,KAAK,CAACC,KAAK,CAACgF,UAAU,EAAEC,UAAU,GAAG,CAAC,CAAC;gBACnD,IAAI1G,KAAK,GAAGwB,KAAK,CAACC,KAAK,CAACiF,UAAU,IAAIA,UAAU,GAAGK,QAAQ,IAAIvF,KAAK,CAACjB,UAAU,CAACmG,UAAU,CAAC,KAAK,GAAG,CAACnG,UAAU,CAAC,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC,EAAEwG,QAAQ,CAAC;gBACrI,IAAIC,KAAK,KAAK,MAAM,EAAE;kBACpBX,UAAU,IAAI,IAAI;kBAClBA,UAAU,IAAIrG,KAAK;gBACrB,CAAC,MAAM,IAAIgH,KAAK,KAAK,IAAI,EAAE;kBACzBV,iBAAiB,GAAGtG,KAAK;gBAC3B,CAAC,MAAM,IAAIgH,KAAK,KAAK,OAAO,EAAE;kBAC5BT,eAAe,GAAGvG,KAAK;gBACzB,CAAC,MAAM,IAAIgH,KAAK,KAAK,OAAO,EAAE;kBAC5BrB,YAAY,GAAGpB,aAAa,CAACvE,KAAK,EAAE2F,YAAY,CAAC;kBACjDE,KAAK,GAAGF,YAAY;gBACtB,CAAC,MAAM,IAAIqB,KAAK,KAAK,kBAAkB,EAAE;kBACvCpB,gBAAgB,GAAGrB,aAAa,CAACvE,KAAK,EAAE4F,gBAAgB,CAAC;kBACzD,IAAI5G,OAAO,KAAK,CAAC,EAAE;oBACjBnF,YAAY,CAACmF,OAAO,CAAC;oBACrBA,OAAO,GAAGpF,UAAU,CAAC,YAAY;sBAC/BgG,SAAS,CAAC,CAAC;oBACb,CAAC,EAAEgG,gBAAgB,CAAC;kBACtB;gBACF;cACF;cACA,IAAI7G,KAAK,KAAKiF,WAAW,EAAE;gBACzB,IAAIqC,UAAU,KAAK,EAAE,EAAE;kBACrB7C,WAAW,GAAG8C,iBAAiB;kBAC/B,IAAIC,eAAe,KAAK,EAAE,EAAE;oBAC1BA,eAAe,GAAG,SAAS;kBAC7B;kBACA,IAAIzL,KAAK,GAAG,IAAIwI,YAAY,CAACiD,eAAe,EAAE;oBAC5ChD,IAAI,EAAE8C,UAAU,CAAC5E,KAAK,CAAC,CAAC,CAAC;oBACzB+B,WAAW,EAAE8C;kBACf,CAAC,CAAC;kBACFd,EAAE,CAAC7C,aAAa,CAAC7H,KAAK,CAAC;kBACvB,IAAIyL,eAAe,KAAK,MAAM,EAAE;oBAC9BxB,IAAI,CAACS,EAAE,EAAEA,EAAE,CAACN,MAAM,EAAEpK,KAAK,CAAC;kBAC5B,CAAC,MAAM,IAAIyL,eAAe,KAAK,SAAS,EAAE;oBACxCxB,IAAI,CAACS,EAAE,EAAEA,EAAE,CAACL,SAAS,EAAErK,KAAK,CAAC;kBAC/B,CAAC,MAAM,IAAIyL,eAAe,KAAK,OAAO,EAAE;oBACtCxB,IAAI,CAACS,EAAE,EAAEA,EAAE,CAAClH,OAAO,EAAExD,KAAK,CAAC;kBAC7B;kBACA,IAAIsL,YAAY,KAAKtC,MAAM,EAAE;oBAC3B;kBACF;gBACF;gBACAuC,UAAU,GAAG,EAAE;gBACfE,eAAe,GAAG,EAAE;cACtB;cACAxH,KAAK,GAAGuB,CAAC,KAAK,IAAI,CAACC,UAAU,CAAC,CAAC,CAAC,GAAGwD,QAAQ,GAAGC,WAAW;YAC3D,CAAC,MAAM;cACL,IAAIjF,KAAK,KAAKiF,WAAW,EAAE;gBACzByC,UAAU,GAAGM,QAAQ;gBACrBhI,KAAK,GAAGkF,KAAK;cACf;cACA,IAAIlF,KAAK,KAAKkF,KAAK,EAAE;gBACnB,IAAI3D,CAAC,KAAK,GAAG,CAACC,UAAU,CAAC,CAAC,CAAC,EAAE;kBAC3BmG,UAAU,GAAGK,QAAQ,GAAG,CAAC;kBACzBhI,KAAK,GAAGmF,WAAW;gBACrB;cACF,CAAC,MAAM,IAAInF,KAAK,KAAKmF,WAAW,EAAE;gBAChCnF,KAAK,GAAGoF,KAAK;cACf;YACF;UACF;QACF;MACF;IACF,CAAC;IAED,IAAI5E,QAAQ,GAAG,SAAAA,CAAU3B,KAAK,EAAE;MAC9B,IAAIwI,YAAY,KAAKvC,IAAI,IAAIuC,YAAY,KAAKxC,UAAU,EAAE;QACxDwC,YAAY,GAAGzC,OAAO;QACtB,IAAI3E,OAAO,KAAK,CAAC,EAAE;UACjBnF,YAAY,CAACmF,OAAO,CAAC;UACrBA,OAAO,GAAG,CAAC;QACb;QACAA,OAAO,GAAGpF,UAAU,CAAC,YAAY;UAC/BgG,SAAS,CAAC,CAAC;QACb,CAAC,EAAEiG,KAAK,CAAC;QACTA,KAAK,GAAGlB,aAAa,CAACC,IAAI,CAACC,GAAG,CAACc,YAAY,GAAG,EAAE,EAAEE,KAAK,GAAG,CAAC,CAAC,CAAC;QAE7DL,EAAE,CAAC5K,UAAU,GAAGgJ,UAAU;QAC1B,IAAI9I,KAAK,GAAG,IAAI4I,UAAU,CAAC,OAAO,EAAE;UAAC9F,KAAK,EAAEA;QAAK,CAAC,CAAC;QACnD4H,EAAE,CAAC7C,aAAa,CAAC7H,KAAK,CAAC;QACvBiK,IAAI,CAACS,EAAE,EAAEA,EAAE,CAAClH,OAAO,EAAExD,KAAK,CAAC;QAC3B,IAAI8C,KAAK,IAAI3C,SAAS,EAAE;UACtB4C,OAAO,CAACD,KAAK,CAACA,KAAK,CAAC;QACtB;MACF;IACF,CAAC;IAED,IAAIiJ,KAAK,GAAG,SAAAA,CAAA,EAAY;MACtBT,YAAY,GAAGtC,MAAM;MACrB,IAAIqC,eAAe,IAAIlL,SAAS,EAAE;QAChCkL,eAAe,CAAC3J,KAAK,CAAC,CAAC;QACvB2J,eAAe,GAAGlL,SAAS;MAC7B;MACA,IAAI+D,OAAO,KAAK,CAAC,EAAE;QACjBnF,YAAY,CAACmF,OAAO,CAAC;QACrBA,OAAO,GAAG,CAAC;MACb;MACAwG,EAAE,CAAC5K,UAAU,GAAGkJ,MAAM;IACxB,CAAC;IAED,IAAIlE,SAAS,GAAG,SAAAA,CAAA,EAAY;MAC1BZ,OAAO,GAAG,CAAC;MAEX,IAAIoH,YAAY,KAAKzC,OAAO,EAAE;QAC5B,IAAI,CAACmC,WAAW,IAAIK,eAAe,IAAIlL,SAAS,EAAE;UAChDsE,QAAQ,CAAC,IAAItC,KAAK,CAAC,qBAAqB,GAAG2I,gBAAgB,GAAG,gBAAgB,GAAG,GAAG,IAAIQ,YAAY,KAAKxC,UAAU,GAAG,uBAAuB,GAAGmC,UAAU,GAAG,kBAAkB,CAAC,GAAG,GAAG,GAAG,eAAe,CAAC,CAAC;UAC1M,IAAII,eAAe,IAAIlL,SAAS,EAAE;YAChCkL,eAAe,CAAC3J,KAAK,CAAC,CAAC;YACvB2J,eAAe,GAAGlL,SAAS;UAC7B;QACF,CAAC,MAAM;UACL,IAAIgM,aAAa,GAAGrC,IAAI,CAACE,GAAG,CAAC,CAACgB,WAAW,IAAIzK,IAAI,CAACC,GAAG,CAAC,CAAC,IAAIsK,gBAAgB,GAAGvK,IAAI,CAACC,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC;UAC5FwK,WAAW,GAAG,KAAK;UACnB9G,OAAO,GAAGpF,UAAU,CAAC,YAAY;YAC/BgG,SAAS,CAAC,CAAC;UACb,CAAC,EAAEqH,aAAa,CAAC;QACnB;QACA;MACF;MAEAnB,WAAW,GAAG,KAAK;MACnBC,UAAU,GAAG,CAAC;MACd/G,OAAO,GAAGpF,UAAU,CAAC,YAAY;QAC/BgG,SAAS,CAAC,CAAC;MACb,CAAC,EAAEgG,gBAAgB,CAAC;MAEpBQ,YAAY,GAAGxC,UAAU;MACzByC,UAAU,GAAG,EAAE;MACfE,eAAe,GAAG,EAAE;MACpBD,iBAAiB,GAAG9C,WAAW;MAC/BgD,UAAU,GAAG,EAAE;MACfC,UAAU,GAAG,CAAC;MACdC,UAAU,GAAG,CAAC;MACd3H,KAAK,GAAGiF,WAAW;;MAEnB;MACA;MACA,IAAIkD,UAAU,GAAGzL,GAAG;MACpB,IAAIA,GAAG,CAACgG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,OAAO,IAAIhG,GAAG,CAACgG,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,KAAK,OAAO,EAAE;QAC9D,IAAI+B,WAAW,KAAK,EAAE,EAAE;UACtB;UACA,IAAIpG,CAAC,GAAG3B,GAAG,CAACoE,OAAO,CAAC,GAAG,CAAC;UACxBqH,UAAU,GAAG9J,CAAC,KAAK,CAAC,CAAC,GAAG3B,GAAG,GAAGA,GAAG,CAACgG,KAAK,CAAC,CAAC,EAAErE,CAAC,GAAG,CAAC,CAAC,GAAG3B,GAAG,CAACgG,KAAK,CAACrE,CAAC,GAAG,CAAC,CAAC,CAACiD,OAAO,CAAC,6BAA6B,EAAE,UAAU8G,CAAC,EAAEC,SAAS,EAAE;YAClI,OAAOA,SAAS,KAAK1B,6BAA6B,GAAG,EAAE,GAAGyB,CAAC;UAC7D,CAAC,CAAC;UACF;UACAD,UAAU,IAAI,CAACzL,GAAG,CAACoE,OAAO,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,IAAI6F,6BAA6B,GAAE,GAAG,GAAG2B,kBAAkB,CAAC7D,WAAW,CAAC;QAC5H;MACF;MACA,IAAItF,eAAe,GAAGsH,EAAE,CAACtH,eAAe;MACxC,IAAIoJ,cAAc,GAAG,CAAC,CAAC;MACvBA,cAAc,CAAC,QAAQ,CAAC,GAAG,mBAAmB;MAC9C,IAAI1L,OAAO,GAAG4J,EAAE,CAAC5J,OAAO;MACxB,IAAIA,OAAO,IAAIX,SAAS,EAAE;QACxB,KAAK,IAAI6E,IAAI,IAAIlE,OAAO,EAAE;UACxB,IAAIb,MAAM,CAACK,SAAS,CAACsG,cAAc,CAACC,IAAI,CAAC/F,OAAO,EAAEkE,IAAI,CAAC,EAAE;YACvDwH,cAAc,CAACxH,IAAI,CAAC,GAAGlE,OAAO,CAACkE,IAAI,CAAC;UACtC;QACF;MACF;MACA,IAAI;QACFqG,eAAe,GAAGD,SAAS,CAACtH,IAAI,CAACX,GAAG,EAAEkB,OAAO,EAAEG,UAAU,EAAEC,QAAQ,EAAE2H,UAAU,EAAEhJ,eAAe,EAAEoJ,cAAc,CAAC;MACnH,CAAC,CAAC,OAAO1J,KAAK,EAAE;QACdiJ,KAAK,CAAC,CAAC;QACP,MAAMjJ,KAAK;MACb;IACF,CAAC;IAED4H,EAAE,CAAC/J,GAAG,GAAGA,GAAG;IACZ+J,EAAE,CAAC5K,UAAU,GAAGgJ,UAAU;IAC1B4B,EAAE,CAACtH,eAAe,GAAGA,eAAe;IACpCsH,EAAE,CAAC5J,OAAO,GAAGA,OAAO;IACpB4J,EAAE,CAACJ,MAAM,GAAGyB,KAAK;IAEjBjH,SAAS,CAAC,CAAC;EACb;EAEAqF,mBAAmB,CAAC7J,SAAS,GAAGL,MAAM,CAACC,MAAM,CAACuH,WAAW,CAACnH,SAAS,CAAC;EACpE6J,mBAAmB,CAAC7J,SAAS,CAACwI,UAAU,GAAGA,UAAU;EACrDqB,mBAAmB,CAAC7J,SAAS,CAACyI,IAAI,GAAGA,IAAI;EACzCoB,mBAAmB,CAAC7J,SAAS,CAAC0I,MAAM,GAAGA,MAAM;EAC7CmB,mBAAmB,CAAC7J,SAAS,CAACyL,KAAK,GAAG,YAAY;IAChD,IAAI,CAACzB,MAAM,CAAC,CAAC;EACf,CAAC;EAEDH,mBAAmB,CAACrB,UAAU,GAAGA,UAAU;EAC3CqB,mBAAmB,CAACpB,IAAI,GAAGA,IAAI;EAC/BoB,mBAAmB,CAACnB,MAAM,GAAGA,MAAM;EACnCmB,mBAAmB,CAAC7J,SAAS,CAAC8C,eAAe,GAAGjD,SAAS;EAEzD,IAAIsM,CAAC,GAAGtN,iBAAiB;EACzB,IAAIH,cAAc,IAAImB,SAAS,KAAKhB,iBAAiB,IAAIgB,SAAS,IAAI,EAAE,iBAAiB,IAAIhB,iBAAiB,CAACmB,SAAS,CAAC,CAAC,EAAE;IAC1H;IACA;IACA;IACA;IACA;IACA;IACAmM,CAAC,GAAGtC,mBAAmB;EACzB;EAEA,CAAC,UAAUuC,OAAO,EAAE;IAClB,IAAI,OAAOC,MAAM,KAAK,QAAQ,IAAI,OAAOA,MAAM,CAACC,OAAO,KAAK,QAAQ,EAAE;MACpE,IAAIC,CAAC,GAAGH,OAAO,CAACE,OAAO,CAAC;MACxB,IAAIC,CAAC,KAAK1M,SAAS,EAAEwM,MAAM,CAACC,OAAO,GAAGC,CAAC;IACzC,CAAC,MACI,IAAI,OAAOC,MAAM,KAAK,UAAU,IAAIA,MAAM,CAACC,GAAG,EAAE;MACnDD,MAAM,CAAC,CAAC,SAAS,CAAC,EAAEJ,OAAO,CAAC;IAC9B,CAAC,MACI;MACHA,OAAO,CAAC7N,MAAM,CAAC;IACjB;EACF,CAAC,EAAE,UAAU+N,OAAO,EAAE;IACpBA,OAAO,CAACzC,mBAAmB,GAAGA,mBAAmB;IACjDyC,OAAO,CAACzN,iBAAiB,GAAGA,iBAAiB;IAC7CyN,OAAO,CAACxN,WAAW,GAAGqN,CAAC;EACzB,CAAC,CAAC;AACJ,CAAC,EAAC,OAAOO,UAAU,KAAK,WAAW,GAAI,OAAOpN,MAAM,KAAK,WAAW,GAAGA,MAAM,GAAG,OAAOqN,IAAI,KAAK,WAAW,GAAGA,IAAI,GAAG,IAAI,GAAID,UAAU,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}